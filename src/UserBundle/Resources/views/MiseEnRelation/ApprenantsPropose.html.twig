<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="{{ asset('css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/mission.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/jquery-ui.min.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/PopUp.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/paginate.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/SuperUser.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/ajout.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/jquery-ui.min.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/PopUp.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/Form.css') }}" />


    <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,700' rel='stylesheet' type='text/css'>
    {% block CSS %}{% endblock %}
    <style>
        .hidden{display: none !important;}
        .ui-widget-header{color:black;}



        .col-md-2, .col-md-10{
            padding:0;
        }
        .panel{
            margin-bottom: 0px;
            background-color: #66afe9;
        }
        .chat-window{
            bottom:0;


            margin-left:10px;
        }
        .chat-window > div > .panel{
            border-radius: 5px 5px 0 0;
        }
        .icon_minim{
            padding:2px 10px;
        }
        .msg_container_base{
            background: #e5e5e5;

            margin: 0;
            padding: 0 10px 10px;
            max-height:300px;
            overflow-x:hidden;
        }
        .top-bar {
            background: #666;
            color: white;
            padding: 10px;
            position: relative;
            overflow: hidden;
        }
        .msg_receive{

            padding-bottom:20px !important;
            margin-right:0;

        }
        .msg_receive > time{
            float: left;
        }
        .msg_sent{
            padding-bottom:20px !important;
            margin-right:0;
        }
        .messages {
            background: lightgoldenrodyellow;

            padding: 10px;
            border-radius: 2px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            max-width:100%;
        }

        .messages > p {
            font-size: 13px;
            margin: 0 0 0.2rem 0;
        }
        .messages > time {
            font-size: 11px;
            color: grey;
        }
        .msg_container {
            padding: 10px;

            display: flex;
        }
        img {
            display: block;
            width: 100%;
        }
        .avatar {
            position: relative;
        }


        .base_sent {
            justify-content: flex-end;
            align-items: flex-end;

        }


        .msg_sent > time{
            float: right;
        }





        .msg_container_base::-webkit-scrollbar-track
        {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            background-color: #F5F5F5;
        }

        .msg_container_base::-webkit-scrollbar
        {
            width: 12px;
            background-color: #F5F5F5;
        }

        .msg_container_base::-webkit-scrollbar-thumb
        {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
            background-color: #555;
        }

        .btn-group.dropup{
            position:fixed;
            left:0px;
            bottom:0;
        }
    </style>
    <title>HUB3E - {% block title %}Home{% endblock %}</title>

</head>
<body onunload="window.parent.document.getElementById('iframe').style.position ='static';window.parent.document.getElementById('iframe').style.height ='calc(100% - 72px)';">

<div id="CompteRendu" class="popup" >
    <div onclick="fermeture();hide(this)" class="close"></div>
    <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">

        <form id="PopUpCompteRendu" class="formulaire" method="post">


            <div class="div_form" id="Assister" style="display: none">
                <div class="row" style=" margin-bottom: 20px;">

                    <div class="col-xs-12" >
                        <textarea style="height: 200px;resize: none;" class="input" name="CompteRendu" placeholder="Compte rendu" required ></textarea>
                    </div>
                </div>
            </div>

            <div class="div_form" id="Absence" style="display: none" >

                <div class="row" style=" margin-bottom: 20px;">
                    <textarea name="CompteRenduAbsent" style="height: 200px;resize: none;" class="input"  placeholder="Quelles en sont les raisons?" required ></textarea>
                </div>

            </div>


            <div id="OUI_NON_button" class="div_button">
                <label class="col-xs-12">Avez-vous pu assister au rendez-vous?</label>
                <input class="blue col-xs-3 col-xs-offset-3" style="right: 10px;text-align: center"
                       onclick="document.getElementById('Assister').style.display = 'block';document.getElementById('Assister_button').style.display = 'block';this.parentElement.style.display = 'none'"
                       type="button" value="OUI">
                <input class="blue col-xs-3" style="left: 10px;text-align: center"
                       onclick="document.getElementById('Absence').style.display = 'block';document.getElementById('Absence_button').style.display = 'block';this.parentElement.style.display = 'none'"
                       type="button"   value="NON">
            </div>
            <div id="Absence_button" class="div_button" style="display: none">
                <input onclick="fermeture()" class="blue" style="background:white;color:#666666;border:1px solid #ccc;float: left" type="button" value="Annuler">
                <input class="blue" type="button" onclick="EnvoyerCompteRendu('Absence')"  style="margin-left: 390px" value="Envoyer">
            </div>
            <div id="Assister_button" class="div_button" style="display: none">
                <input class="blue" onclick="fermeture()" style="background:white;color:#666666;border:1px solid #ccc;float: left;text-align: center ;width: 120px;height:50px" type="button" value="Annuler">
                <input class="blue" type="button" onclick="EnvoyerCompteRendu('Assister')" style="margin-left: 300px;text-align:center;width: 120px;height:50px"  value="Envoyer">
            </div>

        </form>

    </div>


</div>
<div id="ConsultationCompteRendu" class="popup" >
    <div onclick="hide(this)" class="close"></div>
    <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">
        <div id="ComptesRenduContainer"></div>
    </div>
</div>
<div id="ajounerPopUp" class="popup" >
    <div onclick="fermeture();hide(this)" class="close"></div>
    <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">

        <form id="PopUpAjournement" class="formulaire" method="post">


            <div class="div_form" id="Assister">
                <button type="button" onclick="AddDateTimeDiv(this)">+</button>
                <div class="col-xs-4 col-xs-offset-4">
                    <label class="col-xs-1">Le : </label><input title="Date du rendez-vous" name="dateRDV[]" type="text" class="col-xs-4" required>
                    <label class="col-xs-1"> à </label><input title="Heure du rendez-vous" name="timeRDV[]" class="col-xs-4" type="text" required>
                    <button type="button" class="col-xs-offset-1 col-xs-1" onclick="if(this.parentElement.parentElement.children.length > 2){this.parentNode.parentNode.removeChild(this.parentNode);}">-</button>
                </div>
            </div>

            <div id="Assister_button" class="div_button">
                <input class="blue" onclick="fermeture()" style="background:white;color:#666666;border:1px solid #ccc;float: left;text-align: center ;width: 120px;height:50px" type="button" value="Annuler">
                <input class="blue" type="button" onclick="Ajournement()" style="margin-left: 300px;text-align:center;width: 120px;height:50px"  value="Envoyer">
            </div>

        </form>

    </div>


</div>

<div id="MiseEnRelationPopup" class="popup" >

    <div onclick="fermeture();hide(this)" class="close"></div>
    <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">
        <span class="glyphicon glyphicon-remove" aria-hidden="true" style="float:right; height:40px; font-size:20px"onclick="this.parentElement.previousElementSibling.click();"> </span>

        <div class="row chat-window col-xs-5 col-md-3" id="chat_window_1" style="width:90%;margin-left:10px;background-color: #66afe9">
            <div style="height: 120px ">
                <img id="imgSociete" style="margin-top:10px;float:left;margin-left: 20px;height:70px;width:70px;margin:15px 40px;border-radius: 100%" src="{{ asset('image/entreprise.jpg') }}">
                <label id="lblSociete" style="margin-top:10px;float:left;margin-left: 20px"></label>

                <img id="imgApp" style="margin-top:10px;float:right;margin-right: 20px;height:70px;width:70px;margin:15px 40px;border-radius: 100%" src="">
                <label id="lblApp"style="margin-top:10px;float:right;" ></label>
            </div>
            <div class="col-xs-12 col-md-12">

                <div class="panel panel-default">

                    {% if AllMiseEnRelation is defined %}
                        {% set i=0 %}

                        {% for mise in AllMiseEnRelation %}
                            {% if mise.expediteur.hasrole('ROLE_APPRENANT') %}

                                <div id="Msg{{ i }}" class="row msg_container base_receive" style="margin-right: 1px;margin-left: 50px" name="App{{ mise.expediteur.getId() }}_Mission{{mise.mission.getId()}}">
                                    <div class="col-md-10 col-xs-10">
                                        <div class="messages msg_sent" style="background: #F5F6CE";>

                                            <p style="width: 70%">{{ mise.getMessage }}</p>

                                            <time style="margin-top: -20px;" ><label style="text-transform :uppercase;color:{{ mise.couleur }};font-size:15px">{{ mise.getAction }}</label><br>{{ mise.getDate|date('d-m-Y à H:i') }}</time>

                                        </div>
                                    </div>
                                    <div class="col-md-10 col-xs-10">

                                    </div>
                                    <div class="col-md-2 col-xs-2 avatar">
                                        {% if mise.expediteur.getPhotos %}
                                            <img style="height:70px;width:70px;margin:0 40px;border-radius: 100%" src="data:image/jpg;base64,{{GetMyPhoto(mise.expediteur.getId())}}">
                                        {% elseif mise.expediteur.getCivilite == 'Mme' or mise.expediteur.getCivilite == 'Madame' or mise.expediteur.getCivilite == 'Mademoiselle' %}
                                            <img style="height:70px;width:70px;margin:0 40px;border-radius: 100%" src="{{ asset('image/femme.jpg') }}">
                                        {% else %}
                                            <img style="height:70px;width:70px;margin:0 40px;border-radius: 100%" src="{{ asset('image/homme.jpg') }}">
                                        {% endif %}


                                    </div>

                                    {% set rdv=GetRDV(mise.expediteur.getId(),mise.mission.getId()) %}
                                    {% if rdv %}
                                    {% if (mise.getAction=='Propose rdv' or mise.getAction=='Reporter le RDV') and mise.getId==GetIdTopOfMessges(mise.destinataire,mise.mission) and (GetIdTopOfMessges(mise.destinataire,mise.mission)>GetIdTopOfMessges(mise.expediteur,mise.mission))  %}



                                                        {% if rdv.getStatut()=='1' or rdv.getStatut()=='-1'  %}
                                                            <br/><br/>

                                                            <div  id="DivConfirmationRDV{{ rdv.id }}">

                                                                <br/><label>Action :</label>
                                                                <select id="Action_rdv{{ rdv.id }}" onchange="EnableControle(this.selectedIndex,{{ rdv.id }});" title="Actions" >
                                                                    <option value="Accepter">Accepter RDV</option>
                                                                    <option value="Reporter">Reporter RDV</option>
                                                                    <option value="Annuler">Annuler RDV</option>
                                                                </select>
                                                <br/>
                                                <br/>

                                                <div id="dates_rdv{{ rdv.id }}" >


                                                    {% if rdv.date1 %}
                                                        <label  > {{ rdv.getDate1|date('d-m-Y à H:i') }}
                                                            {% if (app.user == rdv.apprenant and rdv.choixApprenant) or (app.user == rdv.tuteur and not rdv.choixApprenant) %}

                                                                <input type="radio" id="r1{{ rdv.id }}" name="RadioDate" value="1">
                                                            {% endif %}
                                                        </label>
                                                    {% endif %}
                                                    <br/>
                                                    {% if rdv.date2 %}
                                                        <label  > {{ rdv.getDate2|date('d-m-Y à H:i') }}
                                                            {% if (app.user == rdv.apprenant and rdv.choixApprenant) or (app.user == rdv.tuteur and not rdv.choixApprenant) %}
                                                                <input type="radio" id="r2{{ rdv.id }}" name="RadioDate" value="2">
                                                            {% endif %}
                                                        </label>
                                                    {% endif %}
                                                    <br/>
                                                    {% if rdv.date3 %}
                                                        <label  > {{ rdv.getDate3|date('d-m-Y à H:i') }}
                                                            {% if (app.user == rdv.apprenant and rdv.choixApprenant) or (app.user == rdv.tuteur and not rdv.choixApprenant) %}
                                                                <input type="radio"  id="r3{{ rdv.id }}" name="RadioDate" value="3">
                                                            {% endif %}
                                                        </label>
                                                    {% endif %}

                                                    <br/>
                                                    <br/>
                                                </div>
                                                <div id="Reporter_rdv{{ rdv.id }}" style="display:none;">

                                                    <button type="button" onclick="AddDateTimeDiv(this,{{ rdv.id }})">+</button>
                                                    <div class="col-xs-4 col-xs-offset-4">
                                                        <label class="col-xs-1">Le </label><input title="Date du rendez-vous" name="dateRDV[]" type="text" class="col-xs-4" required>
                                                        <label class="col-xs-1"> à </label><input title="Heure du rendez-vous" name="timeRDV[]{{ rdv.id }}" class="col-xs-4" type="text" required>
                                                        <button type="button" class="col-xs-offset-1 col-xs-1" onclick="if(this.parentElement.parentElement.children.length > 2){this.parentNode.parentNode.removeChild(this.parentNode);}">-</button>
                                                    </div>

                                                </div>


                                                <br/><br/>



                                                 <textarea id="Message_rdv{{ rdv.id }}" style="margin-left: 100px;background-color:#F5F6CE;;width:80%;height: 100px;resize: none;" class="input" name="Message" placeholder="Saisissez votre message ici" required ></textarea>
                                                <br/>
                                                <br/>

                                                <input  style="border: 0;font: 18px Roboto;text-align: left;background-color:white ;height: 40px;" type="button" onclick="EnvoyerRDV({{ rdv.id }})"  style="margin-left: 100px" value="Envoyer">

                                            </div>
                                        {% endif %}

                                    {% endif %}
                                    {% endif %}
                                    {% set rdv=GetRDV(mise.expediteur.getId(),mise.mission.getId()) %}
                                {% if rdv %}
                                    {% if  (rdv.getStatut=='1' or rdv.getStatut=='2' ) and mise.getId==GetIdTopOfMessges(mise.destinataire,mise.mission) and (mise.getAction!='En attente' )and (not GetCompteRendu( rdv.id ,mise.destinataire)) and (GetIdTopOfMessges(mise.destinataire,mise.mission)>GetIdTopOfMessges(mise.expediteur,mise.mission))%}
                                        {#ici le RETOUR du RDV#}


                                        <br/><br/>

                                        <div  id="DivConfirmationRDV{{ rdv.id }}">




                                            {% if "now"|date('d-m-Y à H:i')  > rdv.getDate1|date('d-m-Y à H:i') %}
                                                <label>Saisissez le compte rendu du rendez-vous</label>
                                                <select id="Action_rdv{{ rdv.id }}" style="display: none;" title="Actions" >

                                                    <option value="Compte rendu">Compte rendu</option>


                                                </select>
                                            {% else %}
                                                <label>Action :</label>
                                                <select id="Action_rdv{{ rdv.id }}" onchange="EnableControle(this.selectedIndex,{{ rdv.id }});" title="Actions" >

                                                    <option value="Retour RDV">--?--</option>
                                                    <option value="Reporter">Reporter RDV</option>
                                                    <option value="Annuler">Annuler RDV</option>

                                                </select>
                                                <div id="dates_rdv{{ rdv.id }}" >


                                                    {% if rdv.date1 %}
                                                        <label  > Rendez-vous fixé pour le {{ rdv.getDate1|date('d-m-Y à H:i') }}

                                                        </label>
                                                    {% endif %}
                                                    {#<br/>
                                                    {% if rdv.date2 %}
                                                        <label  > {{ rdv.getDate2|date('d-m-Y à H:i') }}
                                                            {% if (app.user == rdv.apprenant and rdv.choixApprenant) or (app.user == rdv.tuteur and not rdv.choixApprenant) %}
                                                                <input type="radio" id="r2{{ rdv.id }}" name="RadioDate" value="2">
                                                            {% endif %}
                                                        </label>
                                                    {% endif %}
                                                    <br/>
                                                    {% if rdv.date3 %}
                                                        <label  > {{ rdv.getDate3|date('d-m-Y à H:i') }}
                                                            {% if (app.user == rdv.apprenant and rdv.choixApprenant) or (app.user == rdv.tuteur and not rdv.choixApprenant) %}
                                                                <input type="radio"  id="r3{{ rdv.id }}" name="RadioDate" value="3">
                                                            {% endif %}
                                                        </label>
                                                    {% endif %}#}

                                                    <br/>
                                                    <br/>
                                                </div>
                                            {% endif %}
                                            <br/>
                                            <br/>


                                            <div id="Reporter_rdv{{ rdv.id }}" style="display:none;">

                                                <button type="button" onclick="AddDateTimeDiv(this,{{ rdv.id }})">+</button>
                                                <div class="col-xs-4 col-xs-offset-4">
                                                    <label class="col-xs-1">Le </label><input title="Date du rendez-vous" name="dateRDV[]" type="text" class="col-xs-4" required>
                                                    <label class="col-xs-1"> à </label><input title="Heure du rendez-vous" name="timeRDV[]{{ rdv.id }}" class="col-xs-4" type="text" required>
                                                    <button type="button" class="col-xs-offset-1 col-xs-1" onclick="if(this.parentElement.parentElement.children.length > 2){this.parentNode.parentNode.removeChild(this.parentNode);}">-</button>
                                                </div>

                                            </div>


                                            <br/><br/>



                                            <textarea id="Message_rdv{{ rdv.id }}" style="margin-left: 100px;background-color:#F5F6CE;;width:80%;height: 100px;resize: none;" class="input" name="Message" placeholder="Saisissez votre message ici" required ></textarea>
                                            <br/>
                                            <br/>

                                            <input  style="border: 0;font: 18px Roboto;text-align: left;background-color:white ;height: 40px;" type="button" onclick="RetourRDV({{ rdv.id }})"  style="margin-left: 100px" value="Envoyer">

                                        </div>

                                    {% endif %}

                                {% endif %}
                                </div>
                            {% else %}



                                <div id="Msg{{ i }}" class="row msg_container base_sent"  style="margin-right: 50px;margin-left: -45px"  name="App{{ mise.destinataire.getId() }}_Mission{{mise.mission.getId()}}">
                                    <div class="col-md-2 col-xs-2 avatar">
                                        <img style="height:70px;width:70px;margin:0 40px;border-radius: 100%" src="{{ asset('image/Entreprise.jpg') }}">

                                    </div>
                                    <div class="col-md-10 col-xs-10">
                                        <div class="messages msg_receive" style="background: #CEECF5;">
                                            <p style="width: 70%;margin-left: 30%">{{ mise.getMessage }}

                                                {% if mise.getAction=='Propose rdv' %}
                                                    <br/>
                                                    {{ GetDateRDV(mise.destinataire.getId(),mise.mission.getId()) }}

                                                {% endif %}
                                            </p>

                                            <time style="margin-top: -20px;" ><label style="text-transform :uppercase;color:{{ mise.couleur }};font-size:15px ">{{ mise.getAction }}</label><br>{{ mise.getDate|date('d-m-Y à H:i') }}</time>
                                        </div>
                                    </div>
                                </div>

                                {% set rdv=GetRDV(mise.destinataire.getId(),mise.mission.getId()) %}
                                {% if rdv %}
                                {% if  (rdv.getStatut=='1' or rdv.getStatut=='2' )  and mise.getId==GetIdTopOfMessges(mise.destinataire,mise.mission) and (mise.getAction!='En attente' )and (not GetCompteRendu( rdv.id ,mise.expediteur)) and (GetIdTopOfMessges(mise.destinataire,mise.mission)>GetIdTopOfMessges(mise.expediteur,mise.mission))%}
                                    {#ici le RETOUR du RDV#}


                                    <br/><br/>

                                    <div  id="DivConfirmationRDV{{ rdv.id }}">




                                        {% if "now"|date('d-m-Y à H:i')  > rdv.getDate1|date('d-m-Y à H:i') %}
                                            <label>Saisissez le compte rendu du rendez-vous</label>
                                            <select id="Action_rdv{{ rdv.id }}" style="display: none;" title="Actions" >

                                                <option value="Compte rendu">Compte rendu</option>


                                            </select>
                                        {% else %}
                                            <label>Action :</label>
                                            <select id="Action_rdv{{ rdv.id }}" onchange="EnableControle(this.selectedIndex,{{ rdv.id }});" title="Actions" >

                                                <option value="Retour RDV">--?--</option>
                                                <option value="Reporter">Reporter RDV</option>
                                                <option value="Annuler">Annuler RDV</option>

                                            </select>
                                            <div id="dates_rdv{{ rdv.id }}" >


                                                {% if rdv.date1 %}
                                                    <label  > Rendez-vous fixé pour le {{ rdv.getDate1|date('d-m-Y à H:i') }}

                                                    </label>
                                                {% endif %}
                                                {#<br/>
                                                {% if rdv.date2 %}
                                                    <label  > {{ rdv.getDate2|date('d-m-Y à H:i') }}
                                                        {% if (app.user == rdv.apprenant and rdv.choixApprenant) or (app.user == rdv.tuteur and not rdv.choixApprenant) %}
                                                            <input type="radio" id="r2{{ rdv.id }}" name="RadioDate" value="2">
                                                        {% endif %}
                                                    </label>
                                                {% endif %}
                                                <br/>
                                                {% if rdv.date3 %}
                                                    <label  > {{ rdv.getDate3|date('d-m-Y à H:i') }}
                                                        {% if (app.user == rdv.apprenant and rdv.choixApprenant) or (app.user == rdv.tuteur and not rdv.choixApprenant) %}
                                                            <input type="radio"  id="r3{{ rdv.id }}" name="RadioDate" value="3">
                                                        {% endif %}
                                                    </label>
                                                {% endif %}#}

                                                <br/>
                                                <br/>
                                            </div>
                                        {% endif %}
                                        <br/>
                                        <br/>


                                        <div id="Reporter_rdv{{ rdv.id }}" style="display:none;">

                                            <button type="button" onclick="AddDateTimeDiv(this,{{ rdv.id }})">+</button>
                                            <div class="col-xs-4 col-xs-offset-4">
                                                <label class="col-xs-1">Le </label><input title="Date du rendez-vous" name="dateRDV[]" type="text" class="col-xs-4" required>
                                                <label class="col-xs-1"> à </label><input title="Heure du rendez-vous" name="timeRDV[]{{ rdv.id }}" class="col-xs-4" type="text" required>
                                                <button type="button" class="col-xs-offset-1 col-xs-1" onclick="if(this.parentElement.parentElement.children.length > 2){this.parentNode.parentNode.removeChild(this.parentNode);}">-</button>
                                            </div>

                                        </div>


                                        <br/><br/>



                                        <textarea id="Message_rdv{{ rdv.id }}" style="margin-left: 100px;background-color:#F5F6CE;;width:80%;height: 100px;resize: none;" class="input" name="Message" placeholder="Saisissez votre message ici" required ></textarea>
                                        <br/>
                                        <br/>

                                        <input  style="border: 0;font: 18px Roboto;text-align: left;background-color:white ;height: 40px;" type="button" onclick="RetourRDV({{ rdv.id }})"  style="margin-left: 100px" value="Envoyer">

                                    </div>

                                {% endif %}
                                {% endif %}
                            {% endif %}
                            {% set i = i + 1 %}
                        {% endfor %}
                    {% endif %}

                </div>
            </div>
        </div>



    </div>




</div>
<div style="border-top: 1px solid #B0B0B0;background-color:  rgb(238, 241, 246);margin: 0;height: 100%;padding-bottom: 40px;overflow: hidden;">

    <div class="col-xs-10 col-xs-offset-1" style="margin-top: 10px;">
        {# <select class="input col-xs-2" title="messages" style="height:40px;">
             <option value="les messages">Tous les rendez-vous</option>
         </select>#}
        <div class="col-xs-2" style="margin-left: 20px;height:40px;display: flex;">
            <span class="glyphicon glyphicon-search col-xs-2" id="basic-addon1" style="height: 30px;padding: 7px;float: left;border: none;border-bottom: 1px solid #CCCCCC;margin: auto 0;background-color: transparent;"></span>
            <input class="col-xs-10" type="text" onkeyup="search(this.value)" aria-describedby="basic-addon1" style="height: 31px;border: none;border-bottom: 1px solid #CCCCCC;margin: auto 0;background-color: transparent;" placeholder="Recherche ...">
        </div>
        <div id="paginationContainer" class="customepaginate" style="max-width: 240px;float: right;display: flex;">
            <button  class="blue" style="background:white;color:#257ef0;border:1px solid #ccc;height:40px;width: 40px;float: right;" type="button" ><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>
        </div>

    </div>

    <div id="ListeApprenantsPropose"  class="col-xs-10 col-xs-offset-1">
        {% if MiseEnRelation is defined %}
            {% set i = 0 %}
            {% set nbreNull = 0 %}
            {% for mise in MiseEnRelation %}

                <div id="{{ mise.id }}" class="Liste" style="border: 1px solid #ddd;margin: 0;height:100px;width: 100%;" >
                    {# <div name="Recherche" style="display: none;">{{ rdv.destinataire.nom }},{{ rdv.destinataire.prenom }},{{ rdv.destinataire.email }},{{ rdv.tuteur.nom }},{{ rdv.tuteur.prenom }},{{ rdv.tuteur.email }},{% if rdv.mission %}{{ rdv.mission.intitule }},{{ rdv.mission.codemission }},{{ rdv.mission.descriptif }},{{ rdv.mission.domaine }},{% if rdv.mission.etablissement %}{{ rdv.mission.etablissement.siret }},{{ rdv.mission.etablissement.adresse }},{{ rdv.mission.etablissement.secteur }},{{ rdv.mission.etablissement.tier.raisonsoc }}{% endif %}{% endif %}</div>#}

                    <div class="col-xs-2" style="width:16.66666666%;" >
                        <div style="border: 15px solid transparent">

                            {% if mise.expediteur.getPhotos %}
                                <img style="height:70px;width:70px;margin:0 40px;border-radius: 100%" src="data:image/jpg;base64,{{GetMyPhoto(mise.expediteur.getId())}}">
                            {% elseif mise.expediteur.getCivilite == 'Mme' or mise.expediteur.getCivilite == 'Madame' or mise.expediteur.getCivilite == 'Mademoiselle' %}
                                <img style="height:70px;width:70px;margin:0 40px;border-radius: 100%" src="{{ asset('image/femme.jpg') }}">
                            {% else %}
                                <img style="height:70px;width:70px;margin:0 40px;border-radius: 100%" src="{{ asset('image/homme.jpg') }}">
                            {% endif %}

                        </div>
                    </div>

                    <div id="nom{{ mise.id }}" class="col-xs-2" style="width:16.66666666%;-webkit-flex-wrap: wrap;flex-wrap: wrap;display: -webkit-box;display: -moz-box;display: -ms-flexbox;display: -webkit-flex;;display:flex;height: 100px;text-align: left; ">


                        <label style="font:18px Roboto;margin: auto;" > {{ mise.expediteur.getNom }}<br/>{{ mise.expediteur.getPrenom }}</label><br/>
                        <img  style="height:30px;width:30px;float:right;margin: auto;" title="Fiche apprenant" onclick="AfficherApp({{ mise.expediteur.getId }});show('ApprenantPopup');" src="{{ asset('image/loupe.jpg') }}"><br/><br/>
                        <img  style="height:30px;width:30px;float:right;margin: auto;"







                              {% set scores=GetScoresApp(mise.getExpediteur) %}
                              onclick="informationApprenant('{{mise.getExpediteur.getPhotos|escape('js')}}','{{ mise.getExpediteur.getCivilite|escape('js') }}','{{ mise.getExpediteur.getNom|escape('js') }}','{{ mise.getExpediteur.getPrenom|escape('js') }}',
                                      '{{ mise.getExpediteur.getEmail|escape('js') }}','{{ mise.getExpediteur.getTelephone|escape('js') }}','{{ mise.getExpediteur.getInfo.getDateNaissance|date("d/m/Y") }}',
                                      '{{ mise.getExpediteur.getInfo.getCpNaissance|escape('js') }}','{{ mise.getExpediteur.getInfo.getLieunaissance|escape('js') }}','{{ mise.getExpediteur.getInfo.getAdresse|escape('js') }}','{{ mise.message|escape('js') }}',
                                      '{{ mise.statut|escape('js') }}','{{ scores[i-nbreNull] }}');
                                      show('FicheApprenant');idMessage={{ mise.id|e('js') }};"
                              title="Localiser l'apprenant"
                               src="{{ asset('image/geolocalisation.jpg') }}">



                    </div>

                    <div id="ecole{{ mise.id }}" class="col-xs-2" style="width:16.66666666%;-webkit-flex-wrap: wrap;flex-wrap: wrap;display: -webkit-box;display: -moz-box;display: -ms-flexbox;display: -webkit-flex;;display:flex;height: 100px;text-align: left; ">
                        <label style="font:18px Roboto;margin: auto;" > {{ mise.mission.getEtablissement.getTier.getRaisonsoc }}</label><br/>



                    </div>
                    <div id="date{{ mise.id }}" class="col-xs-2" style="width:16.66666666%-webkit-flex-wrap: wrap;flex-wrap: wrap;display: -webkit-box;display: -moz-box;display: -ms-flexbox;display: -webkit-flex;;display:flex;height: 100px;text-align: left; ">

                    <label style="font:18px Roboto;margin: auto;" > {{ mise.mission.intitule }}

                        <br/>
                        {% set Myformation=GetFormationCommun(mise.expediteur.getId(),mise.mission.getId()) %}
                        {{ Myformation }}
                    </label>

                        <img  style="height:30px;width:30px;float:right;margin: auto;"  title="Fiche mission" onclick="Afficher({{ mise.mission.getId }});show('MissionPopup');" src="{{ asset('image/loupe.jpg') }}">

                        <img  style="height:30px;width:30px;float:right;margin: auto;"




                              onclick="informationMission('{{ mise.mission.etablissement.tier.logo|escape('js') }}','{{ mise.mission.intitule|escape('js') }}','{{ mise.mission.etablissement.tier.raisonsoc|escape('js') }}','{{ mise.mission.descriptif|escape('js') }}',
                                      '{{ mise.mission.codemission|escape('js') }}','{{ mise.mission.etablissement.adresse|escape('js') }}','{{ mise.mission.etablissement.ville|escape('js')  }}','{{ mise.mission.etablissement.codepostal|escape('js') }}','{{ mise.message|escape('js') }}','{{ mise.statut|escape('js') }}');
                                      show('FicheMission');idMessage={{ mise.id|e('js') }}"

                              title="Localiser la mission"
                              src="{{ asset('image/geolocalisation.jpg') }}">

                    </div>
                    <div id="date{{ mise.id }}" class="col-xs-2" style="width:16.66666666%;-webkit-flex-wrap: wrap;flex-wrap: wrap;display: -webkit-box;display: -moz-box;display: -ms-flexbox;display: -webkit-flex;;display:flex;height: 100px;text-align: left; ">

                        <label style="font:18px Roboto;margin: auto;" > {{ mise.getDate|date('d-m-Y à H:i') }}</label>

                    </div>

                    <div class="col-xs-2" style="width:16.66666666%;">
                        <div style="border: 15px solid transparent">


                            {% if mise.expediteur.getPhotos %}

                                <img style="height:70px;width:70px;float:left;border-radius: 100%" title="Mise en relation" onclick="AfficherChat('{{ mise.expediteur.getId()}}','{{ mise.mission.getId() }}','{{ mise.mission.getEtablissement.getTier.getRaisonsoc|replace({"'": "\\'"}) }}<br/>{{ mise.mission.intitule|replace({"'": "\\'"}) }}','{{ mise.expediteur.getNom|replace({"'": "\\'"}) }}<br/>{{ mise.expediteur.getPrenom|replace({"'": "\\'"}) }}','data:image/jpg;base64,{{ mise.expediteur.getPhotos }}');show('MiseEnRelationPopup');" src="{{ asset('image/MiseEnRelation.png') }}">
                            {% elseif mise.destinataire.getCivilite == 'Mme' or mise.destinataire.getCivilite == 'Madame' or mise.destinataire.getCivilite == 'Mademoiselle' %}


                                <img style="height:70px;width:70px;float:left;border-radius: 100%" title="Mise en relation" onclick="AfficherChat('{{ mise.expediteur.getId()}}','{{ mise.mission.getId() }}','{{ mise.mission.getEtablissement.getTier.getRaisonsoc|replace({"'": "\\'"}) }}<br/>{{ mise.mission.intitule|replace({"'": "\\'"}) }}','{{ mise.expediteur.getNom|replace({"'": "\\'"}) }}<br/>{{ mise.expediteur.getPrenom|replace({"'": "\\'"}) }}','{{ asset('image/femme.jpg') }}');show('MiseEnRelationPopup');" src="{{ asset('image/MiseEnRelation.png') }}">
                            {% else %}

                                <img style="height:70px;width:70px;float:left;border-radius: 100%" title="Mise en relation" onclick="AfficherChat('{{ mise.expediteur.getId()}}','{{ mise.mission.getId() }}','{{ mise.mission.getEtablissement.getTier.getRaisonsoc|replace({"'": "\\'"}) }}<br/>{{ mise.mission.intitule|replace({"'": "\\'"}) }}','{{ mise.expediteur.getNom|replace({"'": "\\'"}) }}<br/>{{ mise.expediteur.getPrenom|replace({"'": "\\'"}) }}','{{ asset('image/homme.jpg') }}');show('MiseEnRelationPopup');" src="{{ asset('image/MiseEnRelation.png') }}">
                            {% endif %}

                            {% if   GetStatut(mise.expediteur)=='1' or ( GetStatut(mise.expediteur)=='2' and "now"|date('d-m-Y à H:i')  > GetDateTimeRDV(mise.expediteur,mise.mission)|date('d-m-Y à H:i'))  %}
                                <img style="height:70px;width:70px;float:left;" title="Action en attente" onclick="" src="{{ asset('image/avirtissement.png') }}">
                            {% endif %}

                        </div>
                    </div>




                </div>


            {% endfor %}
        {% endif %}
    </div>

    <div id="MissionPopup" class="popup" >

        <div onclick="fermeture();hide(this)" class="close"></div>
        <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">
            <span class="glyphicon glyphicon-remove" aria-hidden="true" style="float:right; height:40px; font-size:20px"onclick="this.parentElement.previousElementSibling.click();"> </span>
            {% set i=0 %}
            {% for mise in MiseEnRelation %}

                {% set MyMission =affichageMission(mise.mission.getId(),'-1',app.user.id) %}


                <div class="divMissionPopup" id="Div_{{MyMission.mission.getId}}" style="padding: 0;display:none">


                    <div class="row" style="margin: 0;">

                        <img class="col-xs-1" src="data:image/jpg;base64,{{ MyMission.mission.getEtablissement.getTier.getLogo }}" style="height: 60px;width: 60px;border: 5px solid transparent;">
                        <div class="col-xs-4">
                            <div class="col-xs-12" style="height: 35px;text-align: left; ">
                                <label style="font:large Roboto;color:black;text-align: left;margin:15px 0 0 20px;" >{{ MyMission.mission.getIntitule }} - </label>
                                <label style="font:large Roboto;color:#2A76CC;text-align: left;margin-top:15px" > {{ MyMission.mission.getEtablissement.getTier.getRaisonsoc }}</label>
                            </div>
                            <div class="col-xs-12" style="height: 35px;text-align: left;font:medium Roboto;  margin:0 0 0 20px;">
                                {{MyMission.mission.getEtablissement.getAdresse }}, {{ MyMission.mission.getEtablissement.getCodePostal }} {{ MyMission.mission.getEtablissement.getVille }}
                            </div>
                        </div>


                        {# INFOS EN DUR COMMENTEES POUR LA PRESENTATION
                        <div class="col-xs-1">
                            <div class="col-xs-12" style="height: 30px;; padding-top: 10px;"><label style="font-size:large;color:#2A76CC;" > 18</label></div>
                            <div class="col-xs-12" style="height: 20px;width:100px;color: #666666;">mises en relation</div>
                        </div>
                        <div class=" col-xs-1">
                            <div class="col-xs-12" style="height: 30px; padding-top: 10px;"><label style="font-size: large;color:#2A76CC" > 5</label></div>
                            <div class="col-xs-12" style="height: 20px;color: #666666;">candidatures</div>
                        </div>
                        #}
                    </div>




                    <div class="row" style="margin: 0;">

                        <button id="ButtonInfoMission" style="width: 100%;" class="col-xs-6 onglet slide"  type="button" data-show="info_mission{{ i }}"> FICHE MISSION</button>

                        <div id="baronglet" class="col-xs-6" style="height: 5px;background-color: #257ef0; z-index: 60;width: 100%;"></div>

                    </div>



                    <div id="info_mission{{ i }}" style="border-top: 1px solid #B0B0B0;background-color:  rgb(238, 241, 246);margin: 0;overflow-y: auto;">
                        <form id="formMission" action="{{ path('missionModif') }}" onsubmit="ShowWaiter();" method="post" enctype="multipart/form-data">
                            <input type="hidden" value="{{ MyMission.mission.getId }}" id="id" name="_ID">
                            <div class="col-xs-9" style="width:65%;background: rgb(238, 241, 246); height: 100%;">

                                <div class="col-xs-12" style="margin-bottom: 50px">
                                    <div class="list-group affichage">

                                        <label class="list-group-item mission" >LA MISSION : <br/>
                                            <textarea id="Descriptif" name="_Descriptif" maxlength="255"  style="height:60px;color:black; font-weight: lighter" readonly >{{MyMission.mission.getDescriptif}}</textarea>
                                        </label>

                                        <label class="list-group-item mission" >LE PROFIL RECHERCHE :<br/>
                                            <textarea style="height:60px;color:black; font-weight: lighter" id="Profil" name="_Profil" required maxlength="255" readonly >{{MyMission.mission.getProfil}}</textarea>
                                        </label>


                                        <label class="list-group-item mission">Domaine : <br/>
                                            <input style="color:black; font-weight: lighter" value="{{MyMission.mission.getDomaine}}" type="text" id="Domaine" name="_Domaine" maxlength="45" readonly>
                                        </label>
                                        <label class="list-group-item mission">Contact Mission: </br>
                                            <label > Nom :</label> <label style="color:black;font-weight: lighter;margin-right: 30px;">{{ MyMission.mission.getNomcontact }}</label>
                                            <label > Prenom :</label> <label style="color:black;font-weight: lighter;margin-right: 30px;">{{ MyMission.mission.getPrenomcontact }}</label>
                                            <label > Fonction :</label>  <label style="color:black;font-weight: lighter;margin-right: 30px;" >{{ MyMission.mission.getFonctioncontact }}</label>
                                            <label > Tel :</label>  <label style="color:black;font-weight: lighter;margin-right: 30px;">{{ MyMission.mission.getTelcontact }}</label>
                                            <label > Mail : </label><label style="color:black;font-weight: lighter;margin-right: 30px;">{{ MyMission.mission.getEmailcontact }}</label>
                                        </label>

                                        <label class="list-group-item mission">Formation Ciblées: </br>

                                            {% for Diffusion in MyMission.Diffusions %}
                                                <div class="row" style="width:100%">
                                                    <label style="color: black;font-weight: lighter;float: left;line-height:40px;margin-right: 40px;">{{ Diffusion.formation.nom }} - {{ Diffusion.formation.etablissement.tier.raisonsoc }} - {{ Diffusion.formation.etablissement.adresse }} </label>

                                                    {% if Diffusion.formation.nomDoc %}
                                                        <label class="cell" style="height: 40px;">Document : <a target="_blank" href="{{ asset('formation_pdf/'~ Diffusion.formation.getId ~'.pdf') }}" >
                                                                <img src="{{ asset('image/PDF.jpg') }}"  style="width:40px; height:40px " alt="fichier de formation" >
                                                            </a>
                                                        </label>
                                                    {% endif %}
                                                </div>
                                            {% endfor %}

                                        </label>

                                        <label class="list-group-item mission" >Commentaire :<br/>
                                            <textarea style="color:black;height: 100px; font-weight: lighter" id="Commentaire" name="_Commentaire"  maxlength="255" readonly >{{MyMission.mission.getCommentaire}}</textarea>
                                        </label>

                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-3"
                                 style="height: 100%;width: 35%">
                                <div class="list-group"
                                     style="margin:15px 0 0 5px;height: 100%; background-color: white;">
                                    <div  class="rightMenu" style="padding: 8px !important;" >
                                        <span class="glyphicon glyphicon-time" aria-hidden="true" style="float: left;"></span>
                                        <label>Date creation :</label><input  value="{{MyMission.mission.getDatecreation|date('d/m/Y')}}" title="DateCreation" disabled>
                                    </div>
                                    <div class="rightMenu" style="padding: 8px !important;" >
                                        <span class="glyphicon glyphicon-user" aria-hidden="true" style="float: left;" ></span>
                                        <label style="margin-right: 65px;">Nom :</label> <input value="{{ MyMission.mission.nomcontact }} {{ MyMission.mission.prenomcontact }}" title="prenomContact" disabled>
                                    </div>
                                    <div class="rightMenu" style="padding: 8px !important;">
                                        <span class="glyphicon glyphicon-envelope" aria-hidden="true" style="float: left;"></span>
                                        <label style="margin-right: 60px;">Email :</label><input value="{{MyMission.mission.getEmailcontact}}" type="email" name="_Emailcontact" title="Emailcontact" maxlength="45" readonly>
                                    </div>
                                    <div class="rightMenu" style="padding: 8px !important;">
                                        <span class="glyphicon glyphicon-list-alt" aria-hidden="true" style="float: left;"></span>
                                        <label style="margin-right: 5px">Type contrat :</label><input value="{{MyMission.mission.getTypecontrat}}" type="text" id="TypeContrat" name="_TypeContrat" title="TypeContrat" maxlength="45" readonly>
                                    </div>
                                    <div class="rightMenu" style="padding: 8px !important;">
                                        <span class="glyphicon glyphicon-list-alt" aria-hidden="true" style="float: left;"></span>
                                        <label style="margin-right: 35px;">Fonction :</label><input value="{{MyMission.mission.getFonctioncontact}}" type="text" id="Fonctioncontact" name="_Fonctioncontact" title="getFonctioncontact" maxlength="45" readonly>
                                    </div>
                                    <div  class="rightMenu " style="padding: 8px !important;">
                                        <span class="glyphicon glyphicon-calendar" aria-hidden="true" style="float: left;"></span>
                                        <label style="margin-right: 25px;" >Date debut :</label><input value="{{MyMission.mission.getDatedebut|date('d/m/Y')}}" type="text"  id="Datedebut" name="_Datedebut" title="datedebut" readonly>
                                    </div>
                                    <div  class="rightMenu " style="padding: 8px !important;">
                                        <span class="glyphicon glyphicon-calendar" aria-hidden="true" style="float: left;"></span>
                                        <label style="margin-right: 45px;">Date fin :</label><input value="{{MyMission.mission.getDatefin|date('d/m/Y')}}" type="text"  id="Datefin" name="_Datefin" title="dateFin" readonly>
                                    </div>
                                    <div class="rightMenu" style="padding: 8px !important;" >
                                        <span class="glyphicon glyphicon-eur" aria-hidden="true" style="float: left;"></span>
                                        <label style="margin-right: 40px;">Nb poste :</label><input value="{{MyMission.mission.getNbreposte}}" type="number" id="Nbreposte" name="_Nbreposte" title="Nbreposte" maxlength="5" readonly>
                                    </div>
                                    <div class="rightMenu" style="padding: 8px !important;" >
                                        <span class="glyphicon glyphicon-eur" aria-hidden="true" style="float: left;"></span>
                                        <label>Remuneration :</label><input value="{{MyMission.mission.getRemuneration}}" type="number" id="Remuneration" name="_Remuneration" title="Remuneration" maxlength="5" readonly>
                                    </div>
                                    <div class="rightMenu" style="padding: 8px !important;">
                                        <span class="glyphicon glyphicon-qrcode" aria-hidden="true" style="float:left;"></span>
                                        <label style="margin-right: 10px;">code mission :</label><input placeholder="Code mission"  value="{{MyMission.mission.getCodemission}}" name="_Codemission" title="Code mission" required maxlength="9" type="text" readonly>
                                    </div>

                                    {#  {% if is_granted('ROLE_RECRUTEUR') or is_granted('ROLE_ADMINSOC') %} #}
                                    {% set modif = false %}
                                    {% if is_granted('ROLE_SUPER_ADMIN') or (MyMission.mission.tier == app.user.tier and (is_granted('ROLE_ADMINSOC') or is_granted('ROLE_ADMINECOLE'))) %}
                                        {% set modif = true %}
                                    {% elseif app.user.etablissement and MyMission.mission.tier == app.user.etablissement.tier and is_granted('ROLE_RECRUTEUR') %}
                                        {% set modif = true %}
                                    {% endif %}


                                </div>

                            </div>
                        </form>


                    </div>




                    <div  id="map{{ i }}" style="height: 100%;width: 100%;position: absolute;visibility: hidden;">

                    </div>





                    <div id="wrapper" class="infobox-wrapper">
                        <div id="Societe_Info{{ i }}" class="infobox">
                            <div class="inbox" >
                                <div >
                                    <img src="data:image/jpg;base64,{{ MyMission.mission.etablissement.tier.getLogo }}" style="height:100%;width: 100%;border-radius: 50%;">
                                </div>
                            </div>
                            <label class="col-xs-12" style="color:white;font: 10px Roboto;text-transform: uppercase; text-align: center;top:30px;">{{ MyMission.mission.intitule }} - {{ MyMission.mission.etablissement.tier.raisonsoc }}</label>
                            <label class="col-xs-12" style="color:white;font: 10px Roboto;text-transform: uppercase; text-align: center;top:30px;">4.7<img src="{{ asset('image/bookmark50.png') }}" style="height: 10px"></label>
                            <button type="button" class="col-xs-12" style="margin-top: 30px;">Voir sa fiche</button>
                            <button type="button" class="col-xs-12" >Mettre en relation</button>
                            <button class="col-xs-12">plus</button>
                        </div>
                    </div>


                </div>
                <div id="Localisation{{ i }}"  style="border-top: 1px solid #B0B0B0;margin: 0;height: 281px;width: 100%;display:none;">


                </div>

                {% set i=i+1 %}

            {% endfor %}

        </div>




    </div>





    <div id="ApprenantPopup" class="popup" >

        <div onclick="fermeture();hide(this)" class="close"></div>
        <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">
            <span class="glyphicon glyphicon-remove" aria-hidden="true" style="float:right; height:40px; font-size:20px"onclick="this.parentElement.previousElementSibling.click();"> </span>
            {% set i=0 %}
            {% for mise in MiseEnRelation %}

            {% set MyProfil =affichageProfil(mise.expediteur.getId()) %}


            <div class="divApprenantPopup" id="Div_App_{{MyProfil.User.getId}}" style="padding: 0;display:none">

                {% set candidatures=GetCandidatureApp(MyProfil.User.id)  %}
                {% set Experience=GetExperienceApp(MyProfil.User.id)  %}
                {% set Recommandation=GetRecommandationApp(MyProfil.User.id)  %}
                {% set Diplome=GetDiplomeApp(MyProfil.User.id)  %}
                {% set Document=GetDocumentApp(MyProfil.User.id)  %}


                {% set QCMs= MyProfil.User.getEtablissement.getQcmdef() %}
                {% set Questions= GetQuestionsApp(MyProfil.User.id) %}
                {% set reponses= GetReponsesApp(MyProfil.User.id) %}

                {% set QuestionsTest= GetQuestionsTestApp(MyProfil.User.id) %}
                {% set reponsesTest= GetReponsesTestApp(MyProfil.User.id) %}











                <div class="row" style="background-color:  rgb(238, 241, 246);margin: 0;overflow-y: auto;height: 100%">

                    <div  style="background: rgb(238, 241, 246); height: 100%;">
                        <!-- **********************************tache des apprenants************************** -->
                        <div style="height: 35px; width: 100%; padding: 15px 0 0 15px;display: flex;">

                            {% if MyProfil.User.hasRole('ROLE_APPRENANT') %}

                                <!--button id="Button_donnees" class="NavButtonInactive" title="Données Utilisateur" onclick="show_Information('info_user','Button_donnees')" type="button">Données Utilisateur</button>-->

                                <button id="Button_Apprenant"
                                        {% if not MyProfil.User.getCivilite or not MyProfil.User.getNom or not MyProfil.User.getPrenom or not MyProfil.User.getPhotos or not MyProfil.User.getTelephone or not MyProfil.User.getUserName or not MyProfil.User.getEmail or not MyProfil.User.getInfo.getDatenaissance|date('Y-m-d') or not MyProfil.User.getInfo.getCpnaissance or not MyProfil.User.getInfo.getLieunaissance or not MyProfil.User.getInfo.getAdresse   %}
                                        style="background-color: #d2d2d2; color:red;"
                                        {% endif %}class="NavButtonIframe" title="Details de l'Apprenant" onclick="NaviguerOnglet('OngletApprenant','info_Apprenant',this);" type="button">Détails</button>


                                <button id="Button_candidature"
                                        {% if not candidatures is defined or candidatures|length == 0 %}
                                            style="background-color: #d2d2d2; color:red;" {% endif %} class="NavButtonIframe" title="Formation de l'Apprenant" onclick="NaviguerOnglet('OngletApprenant','info_candidature',this);" >Formation de l'Apprenant </button>



                                <button id="Button_Exp"
                                        {% if not Experience is defined or Experience|length == 0 %}
                                            style="background-color: #d2d2d2; color:red;" {% endif %} class="NavButtonIframe" title="Expériences" onclick="NaviguerOnglet('OngletApprenant','info_Exp',this);" >Expériences </button>


                                <button id="Button_recom"
                                        {% if not Recommandation is defined or Recommandation|length == 0 %}
                                            style="background-color: #d2d2d2; color:red;" {% endif %} class="NavButtonIframe" title="Recommandations" onclick="NaviguerOnglet('OngletApprenant','info_recom',this);" >Recommandations </button>


                                <button id="Button_diplome"
                                        {% if not Diplome is defined or Diplome|length == 0 %}
                                            style="background-color: #d2d2d2; color:red;" {% endif %} class="NavButtonIframe" title="Diplômes " onclick="NaviguerOnglet('OngletApprenant','info_diplome',this);">Diplômes </button>


                                <button id="Button_doc"
                                        {% if not Document is defined or Document|length == 0 %}
                                            style="background-color: #d2d2d2; color:red;" {% endif %} class="NavButtonIframe" title="Documents" onclick="NaviguerOnglet('OngletApprenant','info_doc',this);">Documents </button>


                                <button id="Button_Affinite"
                                        {% if not QCMs is defined or QCMs|length == 0 %}
                                            style="background-color: #d2d2d2; color:red;" {% endif %} class="NavButtonIframe" title="Ma société rêvée" onclick="NaviguerOnglet('OngletApprenant','QCM_Affinite',this);">Ma société rêvée </button>

                                <button id="Button_Test"
                                        {% if not QCMtest is defined or QCMtest|length == 0  %}
                                            style="background-color: #d2d2d2; color:red;" {% endif %} class="NavButtonIframe" title="Tests " onclick="NaviguerOnglet('OngletApprenant','QCM_Test',this);">Tests  </button>


                            {% else  %}
                                <Label  style="font:20px Roboto;width: 100%; height: 40px;line-height: 40px;border-radius: 0; background: #1C5AA5; border: 0; color: white;text-align:left;">Détails</Label>
                            {% endif %}
                        </div>
                    </div>
                    <div id="OngletApprenant" class="col-xs-12" style="margin-bottom: 50px">

                        {% if not MyProfil.User.hasRole('ROLE_APPRENANT') %}
                            <div id="info_user" class="list-group affichage">
                                <form class="formulaire" id="formUser" action="{{ path('userModif') }}" onsubmit="ShowWaiter();" method="post" enctype="multipart/form-data">
                                    <input type="hidden" value="{{ MyProfil.User.getId }}" id="id" name="_ID">

                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="civilite">Civilité :</label>

                                            <select  class="champ form-control" title="" id="civilite"  name="_Civilite">
                                                {% if MyProfil.User.getCivilite == 'Mr' %}
                                                    <option selected="selected" value="Mr">Mr.</option>
                                                {% else %}
                                                    <option value="Mr">Mr.</option>
                                                {% endif %}

                                                {% if MyProfil.User.getCivilite == 'Mme' %}
                                                    <option selected="selected" value="Mme">Mme.</option>
                                                {% else %}
                                                    <option value="Mme">Mme.</option>
                                                {% endif %}

                                                {% if MyProfil.User.getCivilite == 'Mlle' %}
                                                    <option selected="selected" value="Mlle">Mlle.</option>
                                                {% else %}
                                                    <option value="Mlle">Mlle.</option>
                                                {% endif %}
                                            </select>
                                        </div>

                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 40px;" for="Photos">Photo :
                                                {% if MyProfil.User.getPhotos %}
                                                    <img id="Photosimg" alt="Photos" style="height:40px" src="data:image/jpg;base64,{{ MyProfil.User.getPhotos }}">
                                                {% elseif MyProfil.User.getCivilite == 'Mme' or MyProfil.User.getCivilite == 'Madame' or MyProfil.User.getCivilite == 'Mademoiselle' %}
                                                    <img id="Photosimg" alt="Photos" style="height:40px" src="{{ asset('image/femme.jpg') }}">
                                                {% else %}
                                                    <img id="Photosimg" alt="Photos" style="height:40px" src="{{ asset('image/homme.jpg') }}">
                                                {% endif %}
                                            </label>
                                            <input onchange="readURL(this,'Photosimg');" accept="image/*" type="file" class="champ form-control" id="Photos" name="_Photos" style="display: none !important;" >
                                            <label><i>Pour modifier votre avatar cliquez sur l'icône</i></label>
                                        </div>
                                    </div>


                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Nom">Nom :</label>
                                            <input value="{{MyProfil.User.getNom}}" type="text" class="champ form-control" id="Nom" name="_Nom" maxlength="45" >
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Prenom">Prénom :</label>
                                            <input value="{{MyProfil.User.getPrenom}}" type="text" class="champ form-control" id="Prenom" name="_Prenom" maxlength="45" >
                                        </div>
                                    </div>

                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Tel">Téléphone : </label>
                                            <input value="{{MyProfil.User.getTelephone}}" type="tel" class="champ form-control"   id="Tel" name="_Tel" maxlength="20" >
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Mail">E-mail :</label>
                                            <input value="{{MyProfil.User.getEmail}}" type="text" class="champ form-control" id="Mail" name="_Mail" maxlength="255" >
                                        </div>
                                    </div>



                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            {% if MyProfil.User.getEtablissement %}
                                                {% if MyProfil.User.getEtablissement.getTier.getEcole == 0 %}
                                                    <label class="list-group-item "style="height: 60px;" >Société  : <label style="color:black" >{{MyProfil.User.getEtablissement.getTier.getRaisonSoc}}</label></label>

                                                {% elseif MyProfil.User.getEtablissement.getTier.getEcole == 1 %}
                                                    <label class="list-group-item "style="height: 60px;" >Ecole  : <label style="color:black" >{{MyProfil.User.getEtablissement.getTier.getRaisonSoc}}</label></label>
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" >Dernière connexion : </label><label style="color:black" > {{MyProfil.User.getLastLogin|date('d/m/Y')}}</label>
                                        </div>
                                    </div>
                                    {#                                 <div class="inputcontainer">
                                                                        <label class="list-group-item" style="height: 60px;" >Expiré le : </label>
                                                                        <label style="color:black" >

                                                                            {% if MyProfil.User.getExpiredAt is null %}
                                                                                &nbsp;
                                                                            {% else %}
                                                                                {{ MyProfil.User.getExpiredAt|date('d/m/Y H:i') }}
                                                                            {% endif %}


                                                                        </label>


                                                                    </div> #}
                                    <div class="inputcontainer">
                                        <label class="list-group-item" style="height: 60px;">Roles :
                                            {% for role in MyProfil.User.getRoles %}
                                                {% if role == "ROLE_APPRENANT" %}
                                                    <label style="color:black">APPRENANT</label>
                                                {% elseif role == "ROLE_ADMINECOLE" %}
                                                    <label style="color:black">Administrateur école</label>
                                                {% elseif role == "ROLE_ADMINSOC" %}
                                                    <label style="color:black">Administrateur Société</label>
                                                {% elseif role == "ROLE_TUTEUR" %}
                                                    <label style="color:black">Tuteur</label>
                                                {% elseif role == "ROLE_RECRUTEUR" %}
                                                    <label style="color:black">Recruteur Placeur</label>
                                                {% elseif role == "ROLE_SUPER_ADMIN" %}
                                                    <label style="color:black">Super Administrateur</label>
                                                {% endif %}
                                            {% endfor %}
                                        </label>
                                    </div>

                                    <input id="formUserSubmit" type="submit" style="display: none;">

                                </form>

                            </div>

                            {# MODIF A FAIRE PROFIL VUE IF NOT APPRENANT #}
                        {% else %}
                            <div id="info_Apprenant" class="list-group affichage">
                                <form class="formulaire" id="formUser" action="{{ path('userModif') }}" onsubmit="ShowWaiter();" method="post" enctype="multipart/form-data">
                                    <input type="hidden" value="{{ MyProfil.User.getId }}" id="id" name="_ID">

                                    {#  <div class="inputcontainer">
                                           <label class="list-group-item" style="height: 60px;" for="civilite">Civilité : </label>

                                           <label style="height: 60px;" for="civilite"> &nbsp {{MyProfil.User.getCivilite}}</label>
                                       </div> #}

                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="civilite">Civilité :</label>

                                            <select  class="champ form-control" title="" id="civilite"  name="_Civilite">
                                                {% if MyProfil.User.getCivilite == 'Mr' %}
                                                    <option selected="selected" value="Mr">Mr.</option>
                                                {% else %}
                                                    <option value="Mr">Mr.</option>
                                                {% endif %}

                                                {% if MyProfil.User.getCivilite == 'Mme' %}
                                                    <option selected="selected" value="Mme">Mme.</option>
                                                {% else %}
                                                    <option value="Mme">Mme.</option>
                                                {% endif %}

                                                {% if MyProfil.User.getCivilite == 'Mlle' %}
                                                    <option selected="selected" value="Mlle">Mlle.</option>
                                                {% else %}
                                                    <option value="Mlle">Mlle.</option>
                                                {% endif %}
                                            </select>
                                        </div>

                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 40px;" for="Photos">Photo :
                                                {% if MyProfil.User.getPhotos %}
                                                    <img id="Photosimg" alt="Photos" style="height:40px" src="data:image/jpg;base64,{{ MyProfil.User.getPhotos }}">
                                                {% elseif MyProfil.User.getCivilite == 'Mme' or MyProfil.User.getCivilite == 'Madame' or MyProfil.User.getCivilite == 'Mademoiselle' %}
                                                    <img id="Photosimg" alt="Photos" style="height:40px" src="{{ asset('image/femme.jpg') }}">
                                                {% else %}
                                                    <img id="Photosimg" alt="Photos" style="height:40px" src="{{ asset('image/homme.jpg') }}">
                                                {% endif %}
                                            </label>
                                            <input onchange="readURL(this,'Photosimg');" accept="image/*" type="file" class="champ form-control" id="Photos" name="_Photos" style="display: none !important;" >
                                            <label><i>Pour modifier votre avatar cliquez sur l'icône</i></label>
                                        </div>
                                    </div>


                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Nom">Nom :</label>
                                            <input value="{{MyProfil.User.getNom}}" type="text" class="champ form-control" id="Nom" name="_Nom" maxlength="45" >
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Prenom">Prénom :</label>
                                            <input value="{{MyProfil.User.getPrenom}}" type="text" class="champ form-control" id="Prenom" name="_Prenom" maxlength="45" >
                                        </div>
                                    </div>

                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Tel">Téléphone : </label>
                                            <input value="{{MyProfil.User.getTelephone}}" type="tel" class="champ form-control"   id="Tel" name="_Tel" maxlength="20" >
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Portable">Téléphone portable : </label>
                                            <input value="{{MyProfil.User.getInfo.getPortable}}" type="tel" class="champ form-control" id="Portable" name="_Portable" maxlength="20" >
                                        </div>
                                    </div>

                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Adresse">Adresse : </label>
                                            <input value="{{MyProfil.User.getInfo.getAdresse}}" type="text" class="champ form-control" minlength="40" id="Adresse" name="_Adresse" maxlength="100" >
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Codepostal">Code postal :</label>
                                            <input value="{{MyProfil.User.getInfo.getCp}}" type="text" class="champ form-control" id="Codepostal" name="_Codepostal" maxlength="45" >
                                        </div>
                                    </div>

                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Datenaissance">Date de naissance : </label>
                                            <input value="{{MyProfil.User.getInfo.getDatenaissance|date('d/m/Y') }}" type="text" class="champ form-control" id="Datenaissance" name="_Datenaissance" maxlength="45" required >
                                        </div>

                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Lieunaissance">Lieu de naissance:</label>
                                            <input value="{{MyProfil.User.getInfo.getLieunaissance}}" type="text" class="champ form-control" id="Lieunaissance" name="_Lieunaissance" maxlength="45" required >
                                        </div>
                                    </div>
                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Cpnaissance">Cp de naissance  :</label>
                                            <input value="{{MyProfil.User.getInfo.getCpnaissance}}" type="text" class="champ form-control" id="Cpnaissance" name="_Cpnaissance" maxlength="45" required >
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" for="Mail">E-mail :</label>
                                            <input value="{{MyProfil.User.getEmail}}" type="text" class="champ form-control" id="Mail" name="_Mail" maxlength="255" >
                                        </div>
                                    </div>
                                    {# LE PSEUDO EST IL UTILE ? #}
                                    {#  <div class="inputcontainer">
                                        <label class="list-group-item" style="height: 60px;" for="UserName">Pseudo :</label>
                                        <input value="{{MyProfil.User.getUserName}}" type="text" class="champ form-control" id="UserName" name="_Username" maxlength="255" >
                                    </div>  #}

                                    <div class="inputcontainer">
                                        <div class="col-xs-6" style="text-align:left">
                                            {% if MyProfil.User.getEtablissement %}
                                                {% if MyProfil.User.getEtablissement.getTier.getEcole == 0 %}
                                                    <label class="list-group-item "style="height: 60px;" >Société  : <label style="color:black" >{{MyProfil.User.getEtablissement.getTier.getRaisonSoc}}</label></label>

                                                {% elseif MyProfil.User.getEtablissement.getTier.getEcole == 1 %}
                                                    <label class="list-group-item "style="height: 60px;" >Ecole  : <label style="color:black" >{{MyProfil.User.getEtablissement.getTier.getRaisonSoc}}</label></label>
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                        <div class="col-xs-6" style="text-align:left">
                                            <label class="list-group-item" style="height: 60px;" >Dernière connexion : </label><label style="color:black" > {{MyProfil.User.getLastLogin|date('d/m/Y')}}</label>
                                        </div>
                                    </div>


                                    <!--  <div class="inputcontainer">
                                    <label class="list-group-item" style="height: 60px;" >Expiré le : </label>
                                    <label style="color:black" >

                                        {% if MyProfil.User.getExpiredAt is null %}
                                            &nbsp;
                                        {% else %}
                                            {{ MyProfil.User.getExpiredAt|date('d/m/Y H:i') }}
                                        {% endif %}


                                    </label>


                                </div>
                                <div class="inputcontainer">
                                    <label class="list-group-item" style="height: 60px;">Roles :
                                        {% for role in MyProfil.User.getRoles %}
                                            {% if role == "ROLE_APPRENANT" %}
                                                <label style="color:black">APPRENANT</label>
                                            {% elseif role == "ROLE_ADMINECOLE" %}
                                                <label style="color:black">Administrateur école</label>
                                            {% elseif role == "ROLE_ADMINSOC" %}
                                                <label style="color:black">Administrateur Société</label>
                                            {% elseif role == "ROLE_TUTEUR" %}
                                                <label style="color:black">Tuteur</label>
                                            {% elseif role == "ROLE_RECRUTEUR" %}
                                                <label style="color:black">Recruteur Placeur</label>
                                            {% elseif role == "ROLE_SUPER_ADMIN" %}
                                                <label style="color:black">Super Administrateur</label>
                                            {% endif %}
                                        {% endfor %}
                                    </label>


                                </div>-->
                                    <input id="formUserSubmit" type="submit" style="display: none;">

                                    {% if MyProfil.User.GetInfo  %}
                                        <input type="hidden" value="{{ MyProfil.User.GetInfo.getId }}" id="id" name="_IdInfo">
                                        <div class="inputcontainer">
                                            <div class="col-xs-6" style="text-align:left">
                                                <input value="1"  type="checkbox" id="handicap" {% if MyProfil.User.getInfo.getHandicape  %}checked{% endif %} name="_handicap" >&nbsp<label for="handicap">Handicap</label><br>
                                            </div>
                                            <div class="col-xs-6" style="text-align:left">
                                                <input value="1" type="checkbox" id="entrepreneur" {% if MyProfil.User.getInfo.getEntrepreneur  %}checked{% endif %} name="_entrepreneur" >&nbsp<label for="entrepreneur">Entrepreneurs</label>
                                            </div>
                                        </div>

                                        <div class="inputcontainer">
                                            <div class="col-xs-6" style="text-align:left">
                                                <label>Permis  :  </label>

                                                <input title="oui" value="1" type="radio" {% if MyProfil.User.getInfo.getPermis == '1' %} checked {% endif %} name="_Permis"  ><label>oui</label>
                                                <input title="non" value="-1" type="radio" {% if MyProfil.User.getInfo.getPermis == '-1' %} checked {% endif %}  name="_Permis" ><label>non</label>
                                                <input title="en cours" value="0" type="radio" {% if MyProfil.User.getInfo.getPermis == '0' %} checked {% endif %}  name="_Permis" ><label>en cours</label>
                                            </div>

                                            <div class="col-xs-6" style="text-align:left">
                                                <label>Véhicule  :  </label>

                                                <input title="oui" value="1" {% if MyProfil.User.getInfo.getVehicule == '1'%}checked{% endif %} type="radio" name="_Vehicule" ><label>oui</label>
                                                <input title="non" value="0" {% if MyProfil.User.getInfo.getVehicule == '0'%}checked{% endif %} type="radio" name="_Vehicule"  ><label>non</label>
                                            </div>
                                        </div>

                                        {#  <div class="inputcontainer">
                                             <label class="list-group-item" style="height: 60px;" for="FormationActuel">Formation actuel  :</label>
                                             <input value="{{MyProfil.User.getInfo.formationactuelle}}" type="text" class="champ form-control" id="FormationActuel" name="_FormationActuel" maxlength="45"  >
                                         </div>#}
                                        {#<div class="inputcontainer">
                                             <label class="list-group-item" style="height: 60px;" for="DernierDiplome">Dernier diplome :</label>
                                             <input value="{{MyProfil.User.getInfo.dernierDiplome}}" type="text" class="champ form-control" id="DernierDiplome" name="_DernierDiplome" maxlength="45"  >
                                         </div>#}

                                        {#  <div class="inputcontainer">
                                             <label class="list-group-item" style="height: 60px;" for="Facebook">Facebook      :</label>
                                             <input value="{{MyProfil.User.getInfo.getFacebook}}"  class="champ form-control" id="Facebook" name="_Facebook" maxlength="45"  >
                                             <label class="list-group-item" style="height: 60px;" for="Linkedin">Linkedin      : </label>
                                             <input value="{{MyProfil.User.getInfo.getLinkedin}}"  class="champ form-control" id="Linkedin" name="_Linkedin" maxlength="45" >

                                         </div>#}
                                        <div class="inputcontainer">
                                            <label class="list-group-item" style="height: 60px;vertical-align: top;" for="Liens">Lien externe :</label>
                                            <div id="LienexterneContainer" style="display: inline-block;">
                                                {% if  MyProfil.User.getInfo.getLienexterne1  %}
                                                    <div id="lien1" >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getLienexterne1 }}" name="_lien[]" type="text"  class="champ form-control" >
                                                        <img  onclick="supprimerLien(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getLienexterne2 %}
                                                    <div id="lien2"  >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getLienexterne2 }}" name="_lien[]" type="text" class="champ form-control" >
                                                        <img   onclick="supprimerLien(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getLienexterne3 %}
                                                    <div id="lien3" >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getLienexterne3 }}" name="_lien[]" type="text" class="champ form-control" >
                                                        <img onclick="supprimerLien(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                            </div>
                                            <span class="glyphicon glyphicon-plus" style="color:green;vertical-align: top;float: right;margin: 9px;" aria-hidden="true" name="modification" title="Ajouter" OnClick="ajouterLien()"></span>
                                            {#<img  OnClick="ajouterHobbie()" style="vertical-align: top;float: right;margin: 9px;"  src="{{ asset('image/add_x30.png') }}"/>#}
                                        </div>

                                        <div class="inputcontainer">
                                            <div class="col-xs-6" style="text-align:left">
                                                <label class="list-group-item" style="height: 60px;" for="Mobilite">Mobilité      :</label>
                                                <select class="champ form-control" title="" id="Mobilite"  name="_Mobilite" >
                                                    {% if MyProfil.User.getInfo.getMobilite == '10' %}
                                                        <option selected="selected" value="10" >moins de 10 min.</option>
                                                    {% else %}
                                                        <option value="10">moins de 10 min.</option>
                                                    {% endif %}
                                                    {% if MyProfil.User.getInfo.getMobilite == '30' %}
                                                        <option selected="selected" value="30" >moins de 30 min.</option>
                                                    {% else %}
                                                        <option value="30">moins de 30 min.</option>
                                                    {% endif %}
                                                    {% if MyProfil.User.getInfo.getMobilite == '60' %}
                                                        <option  selected="selected" value="60">moins d' 1h.</option>
                                                    {% else %}
                                                        <option  value="60">moins d' 1h.</option>
                                                    {% endif %}

                                                </select>
                                            </div>
                                            <div class="col-xs-6" style="text-align:left">
                                                <label class="list-group-item" style="height: 60px;" for="Fratrie">Nombre de frère et sœur : </label>
                                                <input value="{{MyProfil.User.getInfo.getFratrie}}" type="number" class="champ form-control" id="Fratrie" min="0" name="_Fratrie" maxlength="45" >
                                            </div>
                                        </div>

                                        <div class="inputcontainer">
                                            <label class="list-group-item" style="height: 60px;vertical-align: top;" for="Hobbies">Hobbies :</label>
                                            <div id="HobbiesContainer" style="display: inline-block;">
                                                {% if  MyProfil.User.getInfo.getHobbie1  %}
                                                    <div id="hobbie" >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getHobbie1 }}" name="_hobbie[]" type="text"  class="champ form-control" >
                                                        <img  onclick="supprimerHobbie(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getHobbie2 %}
                                                    <div id="hobbie1"  >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getHobbie2 }}" name="_hobbie[]" type="text" class="champ form-control" >
                                                        <img   onclick="supprimerHobbie(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getHobbie3 %}
                                                    <div id="hobbie2" >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getHobbie3 }}" name="_hobbie[]" type="text" class="champ form-control" >
                                                        <img onclick="supprimerHobbie(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getHobbie4 %}
                                                    <div id="hobbie3" >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getHobbie4 }}" name="_hobbie[]" type="text" class="champ form-control" >
                                                        <img onclick="supprimerHobbie(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getHobbie5 %}
                                                    <div id="hobbie4" >
                                                        <input title="" value="{{ MyProfil.User.getInfo.getHobbie5 }}" name="_hobbie[]" type="text" class="champ form-control" >
                                                        <img  onclick="supprimerHobbie(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                            </div>
                                            <span class="glyphicon glyphicon-plus" style="color:green;vertical-align: top;float: right;margin: 9px;" aria-hidden="true" name="modification" title="Ajouter" OnClick="ajouterHobbie()"></span>
                                            {#<img  OnClick="ajouterHobbie()" style="vertical-align: top;float: right;margin: 9px;"  src="{{ asset('image/add_x30.png') }}"/>#}
                                        </div>



                                        <div class="inputcontainer">
                                            <label class="list-group-item" style="height: 60px;vertical-align: top;" >Langues :</label>
                                            <div id="LanguesContainer" style="display: inline-block;">
                                                {% if MyProfil.User.getInfo.getLangue1 %}
                                                    {% set langue = MyProfil.User.getInfo.getLangue1|split(',') %}
                                                    <div id="langue1">
                                                        <input title="" value="{{ langue[0] }}" name="_Langue[]" type="text" class="champ form-control" >
                                                        <select   class="champ form-control" title="" id="Niveau"  name="_Niveau[]">
                                                            <option {% if langue[1]== "Débutant" %}selected{% endif %} value="Débutant" >Débutant.</option>
                                                            <option {% if langue[1]== "Intermédiaire" %}selected{% endif %} value="Intermédiaire">Intermédiaire.</option>
                                                            <option {% if langue[1]== "Courant" %}selected{% endif %} value="Courant">Courant.</option>
                                                            <option {% if langue[1]== "Langue maternelle" %}selected{% endif %} value="Langue maternelle">Langue maternelle.</option>
                                                        </select>
                                                        <img  onclick="supprimerLangue(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getLangue2 %}
                                                    {% set langue = MyProfil.User.getInfo.getLangue2|split(',') %}
                                                    <div id="langue2">
                                                        <input title="" value="{{ langue[0] }}" name="_Langue[]" type="text"  class="champ form-control" >
                                                        <select   class="champ form-control" title="" id="Niveau"  name="_Niveau[]">

                                                            <option {% if langue[1]== "Débutant" %}selected{% endif %} value="Débutant" >Débutant.</option>
                                                            <option {% if langue[1]== "Intermédiaire" %}selected{% endif %} value="Intermédiaire">Intermédiaire.</option>
                                                            <option {% if langue[1]== "Courant" %}selected{% endif %} value="Courant">Courant.</option>
                                                            <option {% if langue[1]== "Langue maternelle" %}selected{% endif %} value="Langue maternelle">Langue maternelle.</option>
                                                        </select>
                                                        <img  onclick="supprimerLangue(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getLangue3 %}
                                                    {% set langue = MyProfil.User.getInfo.getLangue3|split(',') %}
                                                    <div id="langue3">
                                                        <input title="" value="{{ langue[0] }}" name="_Langue[]" type="text"  class="champ form-control" >
                                                        <select   class="champ form-control" title="" id="Niveau"  name="_Niveau[]">
                                                            <option {% if langue[1]== "Débutant" %}selected{% endif %} value="Débutant" >Débutant.</option>
                                                            <option {% if langue[1]== "Intermédiaire" %}selected{% endif %} value="Intermédiaire">Intermédiaire.</option>
                                                            <option {% if langue[1]== "Courant" %}selected{% endif %} value="Courant">Courant.</option>
                                                            <option {% if langue[1]== "Langue maternelle" %}selected{% endif %} value="Langue maternelle">Langue maternelle.</option>
                                                        </select>
                                                        <img  onclick="supprimerLangue(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getLangue4 %}
                                                    {% set langue = MyProfil.User.getInfo.getLangue4|split(',') %}
                                                    <div id="langue4">
                                                        <input title="" value="{{ langue[0] }}" name="_Langue[]" type="text"  class="champ form-control" >
                                                        <select   class="champ form-control" title="" id="Niveau"  name="_Niveau[]">
                                                            <option {% if langue[1]== "Débutant" %}selected{% endif %} value="Débutant" >Débutant.</option>
                                                            <option {% if langue[1]== "Intermédiaire" %}selected{% endif %} value="Intermédiaire">Intermédiaire.</option>
                                                            <option {% if langue[1]== "Courant" %}selected{% endif %} value="Courant">Courant.</option>
                                                            <option {% if langue[1]== "Langue maternelle" %}selected{% endif %} value="Langue maternelle">Langue maternelle.</option>
                                                        </select>
                                                        <img  onclick="supprimerLangue(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}
                                                {% if MyProfil.User.getInfo.getLangue5 %}
                                                    {% set langue = MyProfil.User.getInfo.getLangue5|split(',') %}
                                                    <div id="langue5">
                                                        <input title="" value="{{ langue[0] }}" name="_Langue[]" type="text"  class="champ form-control" >
                                                        <select   class="champ form-control" title="" id="Niveau"  name="_Niveau[]">
                                                            <option {% if langue[1]== "Débutant" %}selected{% endif %} value="Débutant" >Débutant.</option>
                                                            <option {% if langue[1]== "Intermédiaire" %}selected{% endif %} value="Intermédiaire">Intermédiaire.</option>
                                                            <option {% if langue[1]== "Courant" %}selected{% endif %} value="Courant">Courant.</option>
                                                            <option {% if langue[1]== "Langue maternelle" %}selected{% endif %} value="Langue maternelle">Langue maternelle.</option>
                                                        </select>
                                                        <img  onclick="supprimerLangue(this.parentNode)" src="{{ asset('image/imgSupprimer.png') }}"/>
                                                    </div>
                                                {% endif %}

                                            </div>
                                            <span class="glyphicon glyphicon-plus" style="color:green;vertical-align: top;float: right;margin: 9px;" aria-hidden="true" name="modification" title="Ajouter" onclick="ajouterLangue()"></span>
                                            {#<img onclick="ajouterLangue()" style="vertical-align: top;float: right;margin: 9px;" src="{{ asset('image/add_x30.png') }}"/><br>#}
                                        </div>

                                    {% endif %}
                                </form>
                            </div>

                            <div id="info_Exp" class="list-group affichage" style="display:none">
                                {% if Experience is defined %}
                                    {% for Exp in Experience %}
                                        {% set iddiv = random()  %}
                                        <form id="formExperience" class="formulaire" action="{{ path("experience_added") }}" onsubmit="document.getElementById('submitaddExperience').disabled=true;ShowWaiter();"  method="post" enctype="multipart/form-data">
                                            <input type="hidden" value="{{ Exp.getId }}" id="id" name="_IDExp">
                                            <div class="col-xs-12 Liste">
                                                <div class="row">
                                                    <label class="cell">Nom société : <input value="{{ Exp.nomsociete }}" id="Nomsociete" name="_Nomsociete"></label>
                                                    <label class="cell">Activité : <input value="{{Exp.getActivite }}" name="_Activite">

                                                        {#<img style="float:right" alt="" src="{{ asset('image/imgSupprimer.png') }}" onclick="supprimerExperience('{{ path('supprimer_Experience',{'id':Exp.getId}) }}',this)" />#}
                                                        <button class="button" style="float: right;" type="button" data-toggle="collapse" data-target="#exper{{ iddiv }}"></button>
                                                    </label>
                                                </div>
                                                <div id="exper{{ iddiv }}" class="collapse in" >
                                                    <div class="row">
                                                        <label class="cell">Lieu  : <input value="{{ Exp.lieu }}" id="Lieu" name="_Lieu"></label>
                                                        <label class="cell">Poste  : <input value="{{ Exp.poste }}" id="Poste" name="_Poste"></label>
                                                    </div>
                                                    <div class="row">
                                                        <label class="cell">Début : <input value="{{ Exp.debut | date('m/Y')}}" class="date" id="Nbreannee" name="_Datedebut"></label>
                                                        <label class="cell">Fin : <input value="{{ Exp.fin | date('m/Y')}}" class="date" id="Nbreannee" name="_Datefin"></label>
                                                    </div>
                                                    <div class="row">
                                                        <label class="cell">Description : <textarea style="resize: both;max-width: 50vw;height:100px" id="Descriptionexp" name="_Descriptionexp" maxlength="255"  >{{ Exp.description }}</textarea>
                                                        </label>

                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    {% endfor %}
                                {% endif %}

                             </div>
                            <div id="info_recom" class="list-group affichage" style="display:none">
                                {% if Recommandation is defined %}
                                    {% for Recom in Recommandation %}
                                        {% set iddiv = random()  %}
                                        <form id="formRecommandation"  action="{{ path("recommandation_added") }}" onsubmit="document.getElementById('submitaddRecommandation').disabled=true;ShowWaiter();" enctype="multipart/form-data" method="post" >
                                            <input type="hidden" value="{{ Recom.getId }}" id="id" name="_IDRecom">
                                            <div class="col-xs-12 Liste">
                                                <div class="row">
                                                    <label class="cell">Text  : <textarea style="resize: both;max-width: 50vw;" id="Text" name="_Text" maxlength="255"  >{{ Recom.text }}</textarea>
                                                    </label>
                                                    <label class="cell">Nom : <input value="{{Recom.getNom }}" title="Nom Recommandation" id="Nomrec" name="_Nomrec">
                                                       <button class="button" style="float: right;" type="button" data-toggle="collapse" data-target="#recommandation{{ iddiv }}"></button></label>

                                                    {#<img style="float:right" alt="" src="{{ asset('image/imgSupprimer.png') }}" onclick="supprimerRecommandation('{{ path('supprimer_Recommandation',{'id':Recom.getId}) }}',this)" />
                                                    <button class="button" style="float: right;" type="button" data-toggle="collapse" data-target="#recommandation{{ iddiv }}"></button></label>#}

                                                </div>
                                                <div id="recommandation{{ iddiv }}" class="collapse in" >
                                                    <div class="row">
                                                        <label class="cell">Fonction  : <input value="{{ Recom.fonction }}" title="Fonction recommandation" id="Fonctionrec" name="_Fonctionrec"></label>
                                                        <label class="cell">Email  : <input value="{{ Recom.email }}" title="Email" id="Emailrec" name="_Emailrec"></label>
                                                    </div>
                                                    <div class="row">
                                                        <label class="cell">Téléphone : <input value="{{ Recom.telephone}}" title="Telephone" id="Telephonerec" name="_Telephonerec"></label>


                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    {% endfor %}
                                {% endif %}



                            </div>
                            <div id="info_diplome" class="list-group affichage" style="display:none">
                                {% if Diplome is defined %}
                                    {% for Dip in Diplome %}
                                        {% set iddiv = random()  %}
                                        <form id="formDiplome" class="formulaire" action="{{ path("diplome_added") }}" onsubmit="document.getElementById('submitaddDiplome').disabled=true;ShowWaiter();" method="post" enctype="multipart/form-data">
                                            <input type="hidden" value="{{ Dip.getId }}" id="id" name="_IDDiplome">
                                            <div class="col-xs-12 Liste">
                                                <div class="row">
                                                    <label class="cell">Libellé  : <input value="{{ Dip.libelle }}" id="Libelle" name="_Libelle" ></label>
                                                    <label class="cell">Niveau  : <input value="{{ Dip.niveau }}" id="Niveau" name="_Niveau" >
                                                       <button class="button" style="float: right;" type="button" data-toggle="collapse" data-target="#diplome{{ iddiv }}"></button></label>

                                                    {#<img style="float:right" alt="" src="{{ asset('image/imgSupprimer.png') }}" onclick="supprimerDiplome('{{ path('supprimer_Diplome',{'id':Dip.getId}) }}',this)" />
                                                    <button class="button" style="float: right;" type="button" data-toggle="collapse" data-target="#diplome{{ iddiv }}"></button></label>#}

                                                </div>
                                                <div id="diplome{{ iddiv }}" class="collapse in" >
                                                    <div class="row">
                                                        <label class="cell">Ecole  : <input value="{{ Dip.ecole}}" id="Ecole" name="_Ecole"></label>
                                                        <label class="cell">Obtention : <input value="{{ Dip.obtention }}" id="Obtention" name="_Obtention"></label>

                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    {% endfor %}
                                {% endif %}

                            </div>
                            <div id="info_doc" class="list-group affichage" style="display:none">
                                {% if Document is defined %}
                                    {% for Doc in Document %}
                                        {% set iddiv = random()  %}

                                        <div class="col-xs-12 Liste">
                                            <div class="row">
                                                <label class="cell">Type   : <label>{{ Doc.type }}</label></label>
                                                <label class="cell">Extention : <label>{{Doc.getExtension }}</label>

                                                    <button class="button" style="float: right;" type="button" data-toggle="collapse" data-target="#doc{{ iddiv }}"></button></label>

                                                {#<img style="float:right" alt="" src="{{ asset('image/imgSupprimer.png') }}" onclick="supprimerDocument('{{ path('supprimer_Document',{'id':Doc.getId}) }}',this)" />
                                                <button class="button" style="float: right;" type="button" data-toggle="collapse" data-target="#doc{{ iddiv }}"></button></label>#}

                                            </div>
                                            <div id="doc{{ iddiv }}" class="collapse in" >
                                                <div class="row">
                                                    <label class="cell">Taille  : <label>{{ Doc.taille}}</label></label>
                                                    <label class="cell">Document  :
                                                        {% if Doc.extension == 'application/pdf' %}
                                                            <a target="_blank" href="{{ path('show_Document',{'id':Doc.id}) }}" >
                                                                <img src="{{ asset('image/PDF.jpg') }}"  style="width:40px; height:40px;" title="{{ Doc.name }}" alt="{{ Doc.name }}" >
                                                            </a>
                                                        {% else %}
                                                            <a target="_blank" href="{{ path('show_Document',{'id':Doc.id}) }}" >
                                                                <img src="{{ asset('image/file.png') }}"  style="width:40px; height:40px;" title="{{ Doc.name }}" alt="{{ Doc.name }}" >
                                                            </a>
                                                        {% endif %}
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                {% endif %}




                            </div>
                            <div id="info_candidature" class="list-group affichage" style="display:none">

                                {% if candidatures is defined %}
                                    {% for candidature in candidatures %}
                                        {% set iddiv = random()  %}
                                        {% if app.user == candidature.user or is_granted('ROLE_SUPER_ADMIN') or app.User.tier == candidature.formation.etablissement.tier or app.MyProfil.User.etablissement == candidature.formation.etablissement %}
                                            <div class="col-xs-12 Liste">
                                                <div class="row">
                                                    <label class="cell">Id : <label>{{ candidature.id }}</label></label>

                                                    <label class="cell"  >Statut : <label id="lblStatut">
                                                            {% if is_granted('ROLE_RECRUTEUR') or is_granted('ROLE_TUTEUR') %}
                                                                {% if candidature.statut == 1 %}
                                                                    En attente compléments
                                                                {% elseif candidature.statut == 2 %}
                                                                    En attente validation
                                                                {% elseif candidature.statut == 3 %}
                                                                    Validé
                                                                {% elseif candidature.statut == 99 %}
                                                                    Refusé
                                                                {% endif %}
                                                            {% elseif is_granted('ROLE_APPRENANT') %}
                                                                {% if candidature.statut == 1 %}
                                                                    A compléter
                                                                {% elseif candidature.statut == 2 %}
                                                                    En attente école
                                                                {% elseif candidature.statut == 3 %}
                                                                    Admis
                                                                {% elseif candidature.statut == 99 %}
                                                                    Ajourné
                                                                {% endif %}
                                                            {% endif %}
                                                        </label>

                                                        {% if is_granted('ROLE_RECRUTEUR') %}

                                                            {% if candidature.statut == 1 or candidature.statut == 2 %}

                                                                <span class="glyphicon glyphicon-remove" style="color:red" aria-hidden="true" name="modification" title="Refuser" onclick="modifierStatutCandidature(this,99,'{{ candidature.id }}')"></span>
                                                                <label> + </label><span class="glyphicon glyphicon-ok" style="color:green" aria-hidden="true" name="modification"title="Valider"  onclick="modifierStatutCandidature(this,3,'{{ candidature.id }}')"></span>
                                                                {#<img style="width:25px;"  alt="Refusé"  title="Refusé" onclick="modifierStatutCandidature(this,99,'{{ candidature.id }}')" src="{{ asset('image/stop_x18.png') }}">
                                                                <img  alt="Validé" title="Validé"  onclick="modifierStatutCandidature(this,3,'{{ candidature.id }}')" src="{{ asset('image/imgValide.png') }}">#}

                                                            {% endif %}

                                                        {% endif %}


                                                        {#<img style="float:right;" alt="" src="{{ asset('image/imgSupprimer.png') }}" onclick="supprimerFormation('{{ path('supprimer_Candidature',{'id':candidature.getId}) }}',this)" />#}


                                                        <div class="button" style="float: right;" data-toggle="collapse" data-target="#cand{{ iddiv }}"></div></label>
                                                </div>
                                                <div id="cand{{ iddiv }}" class="collapse in" >
                                                    <div class="row">
                                                        <label class="cell">Ecole  : <label>{{ candidature.formation.etablissement.tier.raisonsoc }}</label></label>
                                                        <label class="cell">Adresse : <label>{{ candidature.formation.etablissement.adresse }}</label></label>
                                                    </div>
                                                    <div class="row">
                                                        <label class="cell">Formation : <label>{{ candidature.formation.nom }}</label></label>
                                                        <label class="cell">Date : <label>{{ candidature.datecandidature|date('d/m/Y') }}</label></label>
                                                    </div>

                                                </div>

                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}

                           </div>
                            <div id="QCM_Affinite" class="list-group affichage" style="display:none">

                                <div class="col-xs-12">
                                    <div class="list-group" style="background: white; margin: 30px 0 0 30px; padding: 0 0; border-left: 20px solid white; border-right: 20px solid white !important; text-align: left;">
                                        {% set i = 0 %}
                                        {% set reponsegroupe = 0 %}
                                        {% if QCMs is defined %}
                                            {% for QCM in QCMs %}
                                                <div class="inputcontainer">
                                                    <label class="list-group-item" style="height: 60px;" for="QCM">Nom du Questionnaire :</label>
                                                    <input type="text" class="champ " id="QCM" name="_Nom" value="{{ QCM.getNom }}" required maxlength="45" readonly><br>
                                                </div>
                                                {% set y = 0 %}
                                                {% for question in Questions[i] %}
                                                    <div class="inputcontainer">
                                                        <!--<label class="list-group-item" style="height: 60px;" for="Question">Question :</label>-->
                                                        <label class="champ" style="width: 100%;" >{{question.getQuestion  }}</label>
                                                        {% for reponse in reponses[i][y] %}
                                                            <div>
                                                                <input type="radio" disabled="true"  name="reponse[{{ reponse.questiondef.id }}]" title="{{ reponse.getReponse }}" value="{{ reponse.getId }}"{% if reponse in MyProfil.User.reponsedef %} checked{% endif %}><label style="font: 14px Roboto black;height: inherit;">{{ reponse.getReponse }}</label>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                    {% set y = y + 1 %}
                                                {% endfor %}
                                                {% set i = i + 1 %}
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>

                            </div>
                            <div id="QCM_Test" class="list-group affichage" style="display:none">
                                <div class="col-xs-12">
                                    <div class="list-group formulaire" style="background: white; margin: 30px 0 0 30px; padding: 0 0; border-left: 20px solid white; border-right: 20px solid white !important; text-align: left;">
                                        {% set i = 0 %}
                                        {% set reponsegroupe = 0 %}
                                        {% if QCMtest is defined %}
                                            {% for QCM in QCMtest %}

                                                <div class="inputcontainer">
                                                    <label class="list-group-item" style="height: 60px;" for="QCM">Nom du Questionnaire :</label>
                                                    <input type="text" class="champ " id="QCM" name="_Nom" value="{{ QCM.getNom }}" required maxlength="45" readonly><br>
                                                </div>
                                                {% set y = 0 %}

                                                {% for questionTest in QuestionsTest[i] %}
                                                    <div class="inputcontainer">
                                                        <!--<label class="list-group-item" style="height: 60px;" for="Question">Question :</label>-->
                                                        <label class="champ" style="width: 100%;" >{{questionTest.getQuestion  }}</label>
                                                        {% for reponseTest in reponsesTest[i][y] %}
                                                            <input title="{{ reponseTest.getReponse }}" disabled="true" type="radio"  name="reponse[{{ reponseTest.questiondef.id }}]" value="{{ reponseTest.getId }}" {% if reponseTest in MyProfil.User.reponsedef %}checked{% endif %} ><label style="font: 14px Roboto black;height: inherit;">{{ reponseTest.getReponse }}</label>
                                                        {% endfor %}

                                                    </div>
                                                    {% set y = y + 1 %}
                                                {% endfor %}

                                                {% set i = i + 1 %}
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>



                </div>

                {% set i=i+1 %}
            </div>
                {% endfor %}






        </div>

    </div>

    <div id="FicheApprenant" class="popup" >
        <div onclick="hide(this)" class="close"></div>
        <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">
            <span class="glyphicon glyphicon-remove" aria-hidden="true" style="float:right; height:40px; font-size:20px"onclick="this.parentElement.previousElementSibling.click();"> </span>

            <form id="formFicheApprenant" class="formulaire"   method="post">
                <div>
                    <div class="col-lg-12" >
                        <img src="" style="border-radius:50%; width:50px; height:50px" >
                    </div>
                    <div class="col-lg-12">
                        <label id="Information_Apprenant_titre" style="color:black" ></label>
                    </div>
                    <div id="Information_Apprenant_titre_adresse" class="col-xs-12" style="height: 20px;color: #666666;font:medium Roboto;margin-bottom: 40px"></div>
                </div>



                <div class="div_form"  id="information_apprenant" >
                    <div class="row" style=" margin-bottom: 20px">



                        <div class="row" >
                            <button onclick="document.getElementById('info_apprenant').style.display ='block';document.getElementById('Localisation').style.display ='none';"
                                    class="col-xs-4 onglet"  type="button" style="margin-left: 20px;width: 50%"> FICHE APPRENANT</button>
                            <button onclick="document.getElementById('Localisation').style.display ='block';document.getElementById('info_apprenant').style.display ='none';
                        var center = map_localisation.getCenter();
                        google.maps.event.trigger(map_localisation, 'resize');
                        map_localisation.setCenter(center);"
                                    class="col-xs-4 onglet"  type="button" style="width: calc(50% - 50px)" >LOCALISATION</button>

                        </div>

                        <div id="info_apprenant" style="height: 281px;border-top: 1px solid #B0B0B0;margin: 0;overflow-y: auto;width: 100%;">
                            <div class="col-xs-12" >

                                <div class="col-xs-12" >
                                    <label class="cell"  style="float:left;">Civilité : <label id="Information_Apprenant_Civilite"></label></label>
                                </div>
                                <div class="col-xs-10 ">
                                    <label class="cell" style="float:left;">Nom : <label id="Information_Apprenant_Nom"></label> </label>
                                </div>
                                <div class="col-xs-10">
                                    <label class="cell" style="float:left;">Prenom : <label id="Information_Apprenant_Prenom"></label></label>

                                </div>
                                <div class="col-xs-10">
                                    <label class="cell" style="float:left;">Email  : <label id="Information_Apprenant_Email"></label></label>
                                </div>
                                <div class="col-xs-10">
                                    <label class="cell" style="float:left;">Téléphone : <label id="Information_Apprenant_Telephone"></label></label>

                                </div>
                                <div class="col-xs-10">
                                    <label class="cell" style="float:left;">Date naissance : <label id="Information_Apprenant_DateNaissance"  ></label></label>
                                </div>
                                <div class="col-xs-10">
                                    <label class="cell" style="float:left;">Cp naissance  : <label id="Information_Apprenant_CpNaissance" ></label></label>

                                </div>

                                <div class="col-xs-10">
                                    <label class="cell" style="float:left;">Lieu naissance: <label id="Information_Apprenant_LieuNaissance" ></label></label>
                                </div>
                                <div class="col-xs-10">
                                    <label class="cell" style="float:left;">Adresse       : <label id="Information_Apprenant_Adresse" ></label></label>
                                </div>
                            </div>
                        </div>
                        <div id="Localisation"  style="border-top: 1px solid #B0B0B0;margin: 0;height: 281px;width: 100%;display:none;">

                        </div>
                    </div>



                </div>





                <div id="information_button" class="div_button" style="display: block;">
                    <input  onclick="show_formapprenant()" class="blue" style="background:white;color:#666666;border:1px solid #ccc;float: left" type="button" value="Décliner">
                    <input id="submitReception" class="blue" type="button" onclick="this.parentNode.parentNode.parentNode.parentNode.style.display='none';" style="margin-left: 250px"  value="Répondre plus tard">
                    <input onclick="show_formapprenantproposer()"  class="blue" type="button"   value="Proposer un rendez-vous">
                </div>



            </form>

        </div>


    </div>
    <div id="FicheMission" class="popup">
        <div onclick="hide(this)" class="close"></div>
        <div class="col-xs-offset-1 col-xs-7" style="background-color: white;padding: 0;border:20px solid white;display: block; margin-left: 20%; ">
            <span class="glyphicon glyphicon-remove" aria-hidden="true" style="float:right; height:40px; font-size:20px"onclick="this.parentElement.previousElementSibling.click();"> </span>

            <form id="formFicheMission" class="formulaire" method="post">

                <div class="div_form" style="border-bottom:1px solid #adadad;display: block;">

                    <div>
                        <div class="col-xs-12" >
                            <img  src="" style="padding: 10px; height: 80px;">
                        </div>
                        <div class="col-xs-12"  style="height: 30px;  padding: 10px;">
                            <label id="Information_Mission_Intitule" style="font:large Roboto;color:black" ></label> -
                            <label id="Information_Mission_titre_raisonsoc" style="font:large Roboto;color:#2A76CC" > </label>
                        </div>
                        <div class="col-xs-12" style="height: 20px; font:small Roboto;margin-bottom:30px">
                            <label id="Information_Mission_titre_adresse"></label>
                        </div>


                    </div>

                    <div  id="information_mission" >
                        <div class="row" style=" margin: 0;">
                            <div class="col-xs-12">



                                <label style="float: right" id="Information_Mission_code"></label>
                            </div>
                            <div class="row" >
                                <button onclick="document.getElementById('info_mission').style.display ='block';document.getElementById('Localisationmission').style.display ='none'"  class="col-xs-4 onglet"  type="button" style="margin-left: 20px;width: 50%"> FICHE MISSION</button>
                                <button onclick="document.getElementById('Localisationmission').style.display ='block';document.getElementById('info_mission').style.display ='none';
                        var center = map_mission.getCenter();
                        google.maps.event.trigger(map_mission, 'resize');
                        map_mission.setCenter(center);" class="col-xs-4 onglet"  type="button" style="width: calc(50% - 50px)" >LOCALISATION</button>
                            </div>
                            <div id="info_mission" style="border-top: 1px solid #B0B0B0;margin: 0;height: 281px;width: 100%;">

                                <div class="col-xs-12" >
                                    <div class="list-group affichage">

                                        <label class="list-group-item mission" >LA MISSION : <br/>
                                            <label id="Information_Mission_Descriptif"  style="color:black; font-weight: lighter" ></label>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div id="Localisationmission"  style="border-top: 1px solid #B0B0B0;margin: 0;height: 281px;width: 100%;display:none;">

                            </div>
                        </div>
                    </div>






                </div>

                <div id="mission_button" class="div_button" style="display:block;">
                    <input  onclick="show_formmission()"  class="blue" style="background:white;color:#666666;border:1px solid #ccc;float: left" type="button" value="Décliner">
                    <input id="submitReception" class="blue" type="submit" style="margin-left: 270px" onclick="this.parentNode.parentNode.parentNode.parentNode.style.display='none';" value="Répondre plus tard">
                    <input  class="blue" type="button" onclick="postuler()"   value="Postuler">

                </div>




            </form>
        </div>

    </div>
</div>




<script type="text/javascript" src="http://maps.google.com/maps/api/js"></script>

<script src="{{ asset('js/OverlappingMarkerSpiderfier.min.js') }}"></script>
<script src="{{ asset('js/infobox.js') }}"></script>



<script src="{{ asset('js/jquery-1.11.3.js') }}"></script>
<script src="{{ asset('js/jquery-ui.min.js') }}"></script>
<script src="{{ asset('js/bootstrap.min.js') }}"></script>
<script src="{{ asset('js/PopUp.js') }}"></script>
<script src="{{ asset('js/paginate.js') }}"></script>
<script language="JavaScript">
    var rendezvousSelectionne;
    var marker,map_localisation,map_mission,marker_societe,idMessage;
    function AddDateTimeDiv(button,idRdv){
        if(button.parentElement.children.length < 4) {
            var divContainer = document.createElement('div');
            divContainer.className = 'col-xs-4 col-xs-offset-4';
            //label DATE
            var LabelDate = document.createElement('label');
            LabelDate.className = 'col-xs-1';
            LabelDate.innerHTML = 'Le ';
            //INPUT DATE
            var inputDate = document.createElement('input');
            inputDate.setAttribute('name','dateRDV[]');
            inputDate.setAttribute('id',button.nextElementSibling.firstElementChild.id +'_'+button.parentElement.children.length);
            inputDate.setAttribute('type','text');
            inputDate.className = "col-xs-4";
            //label DATE
            var LabelTime = document.createElement('label');
            LabelTime.className = 'col-xs-1';
            LabelTime.innerHTML = ' à ';
            //INPUT TIME
            var inputTime = document.createElement('input');
            inputTime.setAttribute('name','timeRDV[]'+idRdv);
            inputTime.setAttribute('id',button.nextElementSibling.children[1].id +'_'+button.parentElement.children.length);
            inputTime.setAttribute('type','text');
            inputTime.className = "col-xs-4";
            //delete button
            var deleteButton = document.createElement('button');
            deleteButton.setAttribute('onclick','if(this.parentElement.parentElement.children.length > 2){this.parentNode.parentNode.removeChild(this.parentNode);}');
            deleteButton.setAttribute('type','button');
            deleteButton.className = "col-xs-offset-1 col-xs-1";
            deleteButton.innerHTML = '-';

            //append
            divContainer.appendChild(LabelDate);
            divContainer.appendChild(inputDate);
            divContainer.appendChild(LabelTime);
            divContainer.appendChild(inputTime);
            divContainer.appendChild(deleteButton);

            button.parentNode.appendChild(divContainer);
        }
    }
    $(document).on( "focus", "input[name='dateRDV[]']:not(.hasDatepicker)", function() {
//toastr.info( "Initializing " + this.id );

        $( this ).datepicker({
            changeMonth: true,
            changeYear: true,
            showButtonPanel: true,
            dateFormat: 'dd/mm/yy',
            monthNames: ["01","02","03","04","05","06","07","08","09","10","11","12"],
            monthNamesShort: ["01","02","03","04","05","06","07","08","09","10","11","12"],
            onClose: function(dateText, inst) {
                $(this).datepicker('setDate', new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay));
            }
        });
    });

    $(document).ready(function(){
        window.parent.document.getElementById('iframe').style.left ='0';
        window.parent.document.getElementById('iframe').style.top ='32px';
        window.parent.document.getElementById('iframe').style.height ='calc(100% - 32px)';
        window.parent.document.getElementById('iframe').style.position ='fixed';
        window.parent.document.getElementById('iframe').style.visibility ='visible';
        $("#paginationContainer").customPaginate({
            itemsToPaginate : ".Liste",
            activeClass : "active-class"
        });

    });

    function Afficher(idMission){
        for(i=0 ; i < document.getElementsByClassName('divMissionPopup').length;i++)
        {
            document.getElementById(document.getElementsByClassName('divMissionPopup')[i].id).style.display='none';
        }
        document.getElementById('Div_'+idMission).style.display='block';
    }


    function AfficherApp(idApp){
        for(i=0 ; i < document.getElementsByClassName('divApprenantPopup').length;i++)
        {
            document.getElementById(document.getElementsByClassName('divApprenantPopup')[i].id).style.display='none';
        }
        document.getElementById('Div_App_'+idApp).style.display='block';
    }




    function AfficherChat(idApp,idMission,Societe,Appre,ImgApp){

//alert(idApp+' / '+idMission);

        document.getElementById('lblSociete').innerHTML=Societe;
        document.getElementById('lblApp').innerHTML=Appre;
        document.getElementById('imgApp').src=ImgApp;

        var NameDivMsg = 'App'+idApp+'_Mission'+idMission;

        var i=0;
        var IdDivMsg=''
        var ClassDivSent='row msg_container base_sent';
        var ClassDivReceive='row msg_container base_receive';
//class="row msg_container base_receive
//class="row msg_container base_sent
        for(i=0 ; i < document.getElementsByName(NameDivMsg).length;i++)
        {

            IdDivMsg=IdDivMsg+"|;|"+document.getElementsByName(NameDivMsg)[i].id+"|;|"

        };


        for(i=0 ; i < document.getElementsByClassName(ClassDivSent).length;i++)
        {
            if ( !(IdDivMsg.includes('|;|'+document.getElementsByClassName(ClassDivSent)[i].id+'|;|'))){

                document.getElementById(document.getElementsByClassName(ClassDivSent)[i].id).style.display='none';
            }else{
                document.getElementById(document.getElementsByClassName(ClassDivSent)[i].id).style.display='block';

            }

        };

        for(i=0 ; i < document.getElementsByClassName(ClassDivReceive).length;i++)
        {
            if ( !(IdDivMsg.includes('|;|'+document.getElementsByClassName(ClassDivReceive)[i].id+'|;|'))){

                document.getElementById(document.getElementsByClassName(ClassDivReceive)[i].id).style.display='none';
            }else{
                document.getElementById(document.getElementsByClassName(ClassDivReceive)[i].id).style.display='block';

            }

        };
// mon javascript ici

    }


    function EnvoyerRDV(IdRdv)
    {

        var DateSelect;
        var Message;
        var Action;
        var idDivRDV='DivConfirmationRDV'+IdRdv;
        Message=document.getElementById('Message_rdv'+IdRdv).value;
        Action=document.getElementById('Action_rdv'+IdRdv).value;
        var radios = document.getElementsByName("RadioDate")

        for (var i=0, len=radios.length; i<len; i++) {
            if ( radios[i].checked ) {
                DateSelect = radios[i].value;
                break;
            }
        }
        if (Action=='Accepter' ){


                // ici l'acceptation du RDV


                ShowWaiter();
                var route = '{{ path('AcceptRDVTuteur',{'id':'_ID','numero':'_NUMERO','textmessage':'_TEXTMESSAGE'}) }}';
                route = route.replace('_ID',IdRdv);
                route= route.replace('_NUMERO',DateSelect);
                route= route.replace('_TEXTMESSAGE',Message);


                $.ajax({
                    url: route,
                    type:'POST',
                    error: function(){
                        DeleteWaiter();
                        alert('une erreur s\'est produite, veuillez réessayer plus tard!');
                    },
                    success: function(data){
                        if(data===1){


                            document.getElementById(idDivRDV).style.display="none";

                        }
                        DeleteWaiter();
                    }
                });





        }else if (Action=='Reporter'){
            // ici reportation RDV

            var inputTimes = document.getElementsByName('timeRDV[]'+IdRdv);
            var DateTimeRdv
            for(var k = 0; k < inputTimes.length; k++){
                var isValid = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(inputTimes[k].value);




                if (!isValid) {
                    alert('verifiez que les heure respect le format HH:MM');
                    return;
                }else{
                    if(DateTimeRdv == null){
                        DateTimeRdv=inputTimes[k].previousElementSibling.previousElementSibling.value+' '+inputTimes[k].value+';'
                    }else{
                        DateTimeRdv=DateTimeRdv+inputTimes[k].previousElementSibling.previousElementSibling.value+' '+inputTimes[k].value+';'
                    }
                }
            }
            ShowWaiter();
            var route = '{{ path('AjournementRDVTuteur',{'id':'_ID','DateTimeRdv':'_DateTimeRdv','MessageTexte':'_MessageTexte'}) }}';

            DateTimeRdv=replaceAll(DateTimeRdv, '/', '|||');
            Message=replaceAll(Message, '/', '|||');
            route = route.replace('_ID',IdRdv);
            route = route.replace('_DateTimeRdv',DateTimeRdv);
            route = route.replace('_MessageTexte',Message);


            $.ajax({
                url: route,
                type:'POST',
                data: $('#PopUpAjournement').serialize(),
                error: function(){
                    DeleteWaiter();
                    alert('une erreur s\'est produite, veuillez réessayer plus tard!');
                },
                success: function(data){
                    //document.getElementById(idDivRDV).style.display="none";
                    //alert(idDivRDV);
                    document.getElementById(idDivRDV).style.display="none";
                    DeleteWaiter();
                }



            });



        }else{
            // ici annulation RDV

            if(confirm('Confirmez-vous l\'annulation du rendez-vous ?')){
                ShowWaiter();
                var route = '{{ path('AnnulerRDVTuteur',{'id':'_ID','MessageTexte':'_MessageTexte'}) }}';
                Message=replaceAll(Message, '/', '|||');
                route = route.replace('_ID',IdRdv);
                route = route.replace('_MessageTexte',Message);

                $.ajax({
                    url: route,
                    type:'POST',
                    error: function(){
                        DeleteWaiter();
                        alert('une erreur s\'est produite, veuillez réessayer plus tard!');
                    },
                    success: function(data){
                        if(data===1){

                            document.getElementById(idDivRDV).style.display="none";
                        }
                        DeleteWaiter();
                    }
                });
            }

        }





        //alert(Message);
        //alert(IdRdv);
        //alert(DateSelect);




    }

    function RetourRDV(IdRdv)
    {

        var DateSelect;
        var Message;
        var Action;
        var idDivRDV='DivConfirmationRDV'+IdRdv;
        Message=document.getElementById('Message_rdv'+IdRdv).value;
        Action=document.getElementById('Action_rdv'+IdRdv).value;




       if (Action=='Reporter'){
           // ici reportation RDV

           var inputTimes = document.getElementsByName('timeRDV[]'+IdRdv);
           var DateTimeRdv
           for(var k = 0; k < inputTimes.length; k++){
               var isValid = /^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(inputTimes[k].value);




               if (!isValid) {
                   alert('verifiez que les heure respect le format HH:MM');
                   return;
               }else{
                   if(DateTimeRdv == null){
                       DateTimeRdv=inputTimes[k].previousElementSibling.previousElementSibling.value+' '+inputTimes[k].value+';'
                   }else{
                       DateTimeRdv=DateTimeRdv+inputTimes[k].previousElementSibling.previousElementSibling.value+' '+inputTimes[k].value+';'
                   }
               }
           }
           ShowWaiter();
           var route = '{{ path('AjournementRDVTuteur',{'id':'_ID','DateTimeRdv':'_DateTimeRdv','MessageTexte':'_MessageTexte'}) }}';

           DateTimeRdv=replaceAll(DateTimeRdv, '/', '|||');
           Message=replaceAll(Message, '/', '|||');
           route = route.replace('_ID',IdRdv);
           route = route.replace('_DateTimeRdv',DateTimeRdv);
           route = route.replace('_MessageTexte',Message);


           $.ajax({
               url: route,
               type:'POST',
               data: $('#PopUpAjournement').serialize(),
               error: function(){
                   DeleteWaiter();
                   alert('une erreur s\'est produite, veuillez réessayer plus tard!');
               },
               success: function(data){
                   //document.getElementById(idDivRDV).style.display="none";
                   //alert(idDivRDV);
                   document.getElementById(idDivRDV).style.display="none";
                   DeleteWaiter();
               }



           });


       }else if  (Action=='Annuler'){
           // ici annulation RDV

           if(confirm('Confirmez-vous l\'annulation du rendez-vous ?')){
               ShowWaiter();
               var route = '{{ path('AnnulerRDVTuteur',{'id':'_ID','MessageTexte':'_MessageTexte'}) }}';
               Message=replaceAll(Message, '/', '|||');
               route = route.replace('_ID',IdRdv);
               route = route.replace('_MessageTexte',Message);
               alert(route);
               $.ajax({
                   url: route,
                   type:'POST',
                   error: function(){
                       DeleteWaiter();
                       alert('une erreur s\'est produite, veuillez réessayer plus tard!');
                   },
                   success: function(data){
                       if(data===1){

                           document.getElementById(idDivRDV).style.display="none";
                       }
                       DeleteWaiter();
                   }
               });
           }

        }else if  (Action=='Retour RDV'){
            alert('Veuillez sélectionner une action');


        }else{

           // ici Compte rendu

           ShowWaiter();
           var route = '{{ path('CompteRenduSaisie',{'id':'_ID','MessageTexte':'_MessageTexte','Type':'_Type'}) }}';
           var Type='tuteur';
           Message=replaceAll(Message, '/', '|||');
           route = route.replace('_ID',IdRdv);
           route = route.replace('_MessageTexte',Message);
           route = route.replace('_Type',Type);
           $.ajax({
               url: route,
               type:'get',

               error: function(){
                   DeleteWaiter();
                   alert('une erreur s\'est produite, veuillez réessayer plus tard!');
               },
               success: function(data){
                   if(data===1){

                       document.getElementById(idDivRDV).style.display="none";
                   }
                   DeleteWaiter();
               }
           });
        }






        //alert(Message);
        //alert(IdRdv);
        //alert(DateSelect);




    }
    function fermeture(){
        var form = document.getElementById('PopUpCompteRendu');
        for(var i = 0; i< form.childElementCount; i++){
            form.children[i].style.display = 'none';
        }
        document.getElementById('OUI_NON_button').style.display = 'block';
    }


    function OrdreDeRemplirCR(id,rdv){
        ShowWaiter();
        var route = '{{ path('OrdreCompleterCR',{'idUser':'_IDUSER','idRDV':'_IDRDV'}) }}';
        route = route.replace('_IDUSER',id);
        route = route.replace('_IDRDV',rdv);
        $.ajax({
            type:'post',
            url: route,
            error: function(){
                DeleteWaiter();
                alert('une erreur s\'est produite, veuillez réessayer plus tard!');
            },
            success:function(data){
                if(data==1){
                    alert('le message a été envoyé correctement!')
                }
                else{
                    console.log(data);
                }
                DeleteWaiter();
            },
            error:function(){
                alert('Une erreur s\'est produite sur le serveur');
                DeleteWaiter();
            }
        })
    }

    function ConsulterCR(id){
        ShowWaiter();
        var route = '{{ path('ConsulterCR',{'idRDV':'_IDRDV'}) }}';
        route = route.replace('_IDRDV',id);
        $.ajax({
            type: 'post',
            url: route,
            error: function(){
                DeleteWaiter();
                alert('une erreur s\'est produite, veuillez réessayer plus tard!');
            },
            success:function(data){
                var container = document.getElementById('ComptesRenduContainer');
                container.innerHTML = '';

                for(var i = 0; i < data.length; i++){
                    var label = document.createElement('label');
                    label.style.color = '#2A76CC';
                    label.style.textTransform = 'uppercase';
                    label.style.float = 'left';
                    label.innerHTML = data[i][0] + ' - ' + data[i][2];

                    var textarea = document.createElement('textarea');
                    textarea.style.backgroundColor = '#e4b9b9';
                    textarea.innerHTML = data[i][1];

                    var divCompteRendu = document.createElement('div');
                    divCompteRendu.style.marginBottom = "20px";
                    divCompteRendu.appendChild(label);
                    divCompteRendu.appendChild(textarea);

                    container.appendChild(divCompteRendu);
                }
                show('ConsultationCompteRendu');
                DeleteWaiter();
            },
            error:function(){
                alert('Une erreur s\'est produite sur le serveur');
            }
        })
    }
    function search(mot){
        var mots = mot.toUpperCase().trim().split(/ +/g);
        var Recherches = document.getElementsByName('Recherche');
        for(var i = 0; i < Recherches.length; i++)
        {
            var score = 0;
            Recherches[i].parentNode.classList.remove('hidden');
            var recherchermot = Recherches[i].innerHTML.toUpperCase().trim().split(/,+/g);
            for(var k = 0; k< recherchermot.length; k++)
            {
                for(var j = 0; j< mots.length;j++)
                {
                    if (stringWith(recherchermot[k], mots[j])) {
                        score++;
                    }
                }
            }
            if(score === 0 ){
                Recherches[i].parentNode.classList.add('hidden');
            }
        }
        $(".Liste").show();
        $("#paginationContainer").html('<button  class="blue" style="background:white;color:#257ef0;border:1px solid #ccc;height:40px;width: 40px;float: right;" type="button" ><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>').customPaginate({
            itemsToPaginate : ".Liste:not(.hidden)",
            activeClass : "active-class"
        });

        var locations =[];
        var loc, map, map_localisation, marker, infobox;
        var idMRDestinataire;

        $(".slide").click(function(){
            document.getElementById('info_mission').style.visibility= 'hidden';
            {% if is_granted('ROLE_TUTEUR') or is_granted('ROLE_RECRUTEUR') %}
            document.getElementById('apprenants_mission').style.visibility= 'hidden';
            {% endif %}
            document.getElementById('map').style.visibility= 'hidden';
            document.getElementById($(this).attr("data-show")).style.visibility= 'visible';

            for(var i = 0; i < infoWindows.length ; i++){
                infoWindows[i].close();
            }
            var target = $(this).offset();

            $("#baronglet").animate({left: "+="+(target.left - $("#baronglet").offset().left)},500)
            sessionStorage.setItem('OngletMission',$(this).attr('id'));

        });


        google.maps.event.addDomListener(window, 'load', initialize);

    }
    function EnableControle(index,idRDV){


        var idDate="dates_rdv".concat(idRDV);
        if (index=='0'){

            document.getElementById(idDate).style.display="block";
            document.getElementById('Reporter_rdv'+idRDV).style.display="none";
        } else if (index=='1')
        {
            document.getElementById('Reporter_rdv'+idRDV).style.display="block";
            document.getElementById(idDate).style.display="none";
        }else{
            document.getElementById('Reporter_rdv'+idRDV).style.display="none";
            document.getElementById(idDate).style.display="none";
        }

    }
    function replaceAll(machaine, chaineARemaplacer, chaineDeRemplacement) {
        return machaine.replace(new RegExp(chaineARemaplacer, 'g'),chaineDeRemplacement);
    }

    function informationMission(image,intitule,raisonsoc,descriptif,codemission,adresse,ville,cp,message,Msgstatut) {
        document.getElementById('FicheMission').getElementsByTagName('img')[0].src ='data:image/jpg;base64,' + image;
        document.getElementById('Information_Mission_Descriptif').innerHTML = descriptif;
        document.getElementById('Information_Mission_Intitule').innerHTML= intitule;
        document.getElementById('Information_Mission_titre_raisonsoc').innerHTML= raisonsoc;
        document.getElementById('Information_Mission_code').innerHTML= codemission;
        document.getElementById('Information_Mission_titre_adresse').innerHTML = adresse +', '+ cp +' '+ ville;


        if(Msgstatut == 1 || Msgstatut == -1 || Msgstatut == 2 ){

            document.getElementById('mission_button').style.display = 'none';
        }
        else{

            document.getElementById('mission_button').style.display = 'block';
        }
        if(marker_societe)
        {
            marker_societe.setMap(null);
        }
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({'address': adresse }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                marker_societe = new google.maps.Marker({
                    map: map_mission,
                    position: results[0].geometry.location,
                    visible: true,
                    icon: '{{ asset('image/societe.png') }}'
                });
                map_mission.setCenter(results[0].geometry.location);
            }
            else {
                alert('Nous n\'avons pas réussi à localiser l\'adresse l\'apprenant qui est : ' + adresse);
            }
        });
    }
    function informationApprenant(image,civilite,nom,prenom,email,telephone,Datenaissance,cpnaissance,lieuNaissance,adresse,message,Msgstatut,score) {

        if(image != ''){
            document.getElementById('formFicheApprenant').getElementsByTagName('img')[0].src ='data:image/jpg;base64,' + image;
        }
        else if( civilite == 'Mme' || civilite =='Madame' || civilite == 'Mademoiselle'){
            document.getElementById('formFicheApprenant').getElementsByTagName('img')[0].src ='{{ asset('image/femme.jpg') }}';
        }
        else{
            document.getElementById('formFicheApprenant').getElementsByTagName('img')[0].src ='{{ asset('image/homme.jpg') }}';
        }


        document.getElementById('Information_Apprenant_Civilite').innerHTML = civilite;
        document.getElementById('Information_Apprenant_Nom').innerHTML = nom;
        document.getElementById('Information_Apprenant_Prenom').innerHTML= prenom;
        document.getElementById('Information_Apprenant_Email').innerHTML = email;
        document.getElementById('Information_Apprenant_Telephone').innerHTML =telephone;
        document.getElementById('Information_Apprenant_DateNaissance').innerHTML =Datenaissance;
        document.getElementById('Information_Apprenant_CpNaissance').innerHTML =cpnaissance;
        document.getElementById('Information_Apprenant_LieuNaissance').innerHTML =lieuNaissance;
        document.getElementById('Information_Apprenant_Adresse').innerHTML =adresse;
        document.getElementById('Information_Apprenant_titre').innerHTML= nom +' '+ prenom;
        document.getElementById('Information_Apprenant_titre_adresse').innerHTML = adresse;



        if(Msgstatut == 1 || Msgstatut == -1 || Msgstatut == 2 ){
            document.getElementById('information_button').style.display = 'none';
        }else{
            document.getElementById('information_button').style.display = 'block';
        }



        if(marker)
        {
            marker.setMap(null);
        }
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({'address': adresse }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                marker = new google.maps.Marker({
                    map: map_localisation,
                    position: results[0].geometry.location,
                    visible: true,
                    //icon: '{{ asset('image/highscore_marker.png') }}'
                    icon: '{{ asset('image/') }}scores/'+score+'.png'
                });
                map_localisation.setCenter(results[0].geometry.location);
            }
            else {
                alert('Nous n\'avons pas réussi à localiser l\'adresse l\'apprenant qui est : ' + adresse);
            }
        });

    }
    function initialize() {
        map_localisation = new google.maps.Map(document.getElementById("Localisation"), {
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        map_mission = new google.maps.Map(document.getElementById("Localisationmission"), {
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script>
</body>
</html>